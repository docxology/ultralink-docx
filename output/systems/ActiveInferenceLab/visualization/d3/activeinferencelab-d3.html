<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>UltraLink D3 Visualization</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
    #graph { width: 100%; height: 600px; border: 1px solid #ccc; }
    .node { cursor: pointer; }
    .links line { stroke: #999; stroke-opacity: 0.6; }
    .nodes circle { stroke: #fff; stroke-width: 1.5px; }
  </style>
</head>
<body>
  <h1>UltraLink Graph Visualization</h1>
  <div id="graph"></div>
  <script>
    // Graph data
    const data = {
      nodes: [{"id":"alice","name":"Dr. Alice Chen","type":"researcher"},{"id":"bob","name":"Dr. Bob Smith","type":"researcher"},{"id":"carol","name":"Dr. Carol Jimenez","type":"researcher"},{"id":"david","name":"David Wilson","type":"researcher"},{"id":"emma","name":"Emma Taylor","type":"researcher"},{"id":"frank","name":"Dr. Frank Martinez","type":"researcher"},{"id":"grace","name":"Grace Kim","type":"researcher"},{"id":"active-inference-model","name":"Active Inference Modeling of Collective Behavior","type":"project"},{"id":"ant-colony-study","name":"Ant Colony Decision Making Study","type":"project"},{"id":"neural-basis","name":"Neural Basis of Active Inference","type":"project"},{"id":"active-inference","name":"Active Inference","type":"concept"},{"id":"collective-behavior","name":"Collective Behavior","type":"concept"},{"id":"swarm-intelligence","name":"Swarm Intelligence","type":"concept"},{"id":"ant-tracking","name":"Ant Tracking System","type":"equipment"},{"id":"neural-recording","name":"Neural Recording Setup","type":"equipment"},{"id":"computation-cluster","name":"High Performance Computing Cluster","type":"equipment"},{"id":"paper-2023a","name":"paper-2023a","type":"publication"},{"id":"paper-2023b","name":"paper-2023b","type":"publication"},{"id":"paper-2024","name":"paper-2024","type":"publication"}],
      links: [{"source":"alice","target":"active-inference-model","type":"leads"},{"source":"bob","target":"ant-colony-study","type":"leads"},{"source":"carol","target":"active-inference-model","type":"contributes"},{"source":"david","target":"active-inference-model","type":"contributes"},{"source":"emma","target":"ant-colony-study","type":"contributes"},{"source":"frank","target":"ant-colony-study","type":"contributes"},{"source":"bob","target":"active-inference-model","type":"contributes_to"},{"source":"carol","target":"active-inference-model","type":"contributes_to"},{"source":"david","target":"ant-colony-study","type":"contributes_to"},{"source":"grace","target":"ant-colony-study","type":"contributes_to"},{"source":"frank","target":"ant-colony-study","type":"contributes_to"},{"source":"emma","target":"ant-colony-study","type":"contributes_to"},{"source":"alice","target":"david","type":"mentors"},{"source":"bob","target":"emma","type":"mentors"},{"source":"alice","target":"carol","type":"mentors"},{"source":"frank","target":"emma","type":"co_advises"},{"source":"carol","target":"alice","type":"reports_to"},{"source":"david","target":"bob","type":"reports_to"},{"source":"emma","target":"alice","type":"reports_to"},{"source":"grace","target":"bob","type":"reports_to"},{"source":"active-inference-model","target":"active-inference","type":"applies"},{"source":"ant-colony-study","target":"collective-behavior","type":"applies"},{"source":"active-inference","target":"collective-behavior","type":"relates_to"},{"source":"ant-colony-study","target":"ant-tracking","type":"uses"},{"source":"active-inference-model","target":"computation-cluster","type":"uses"},{"source":"neural-basis","target":"neural-recording","type":"uses"},{"source":"alice","target":"paper-2023a","type":"authored"},{"source":"bob","target":"paper-2023a","type":"authored"},{"source":"carol","target":"paper-2023a","type":"authored"},{"source":"bob","target":"paper-2023b","type":"authored"},{"source":"emma","target":"paper-2023b","type":"authored"},{"source":"frank","target":"paper-2023b","type":"authored"},{"source":"alice","target":"paper-2024","type":"authored"},{"source":"bob","target":"paper-2024","type":"authored"},{"source":"carol","target":"paper-2024","type":"authored"},{"source":"david","target":"paper-2024","type":"authored"},{"source":"grace","target":"paper-2024","type":"authored"},{"source":"paper-2023a","target":"active-inference-model","type":"results_from"},{"source":"paper-2023b","target":"ant-colony-study","type":"results_from"},{"source":"paper-2024","target":"active-inference-model","type":"results_from"},{"source":"paper-2024","target":"ant-colony-study","type":"results_from"},{"source":"paper-2023a","target":"active-inference","type":"discusses"},{"source":"paper-2023b","target":"collective-behavior","type":"discusses"},{"source":"paper-2024","target":"swarm-intelligence","type":"discusses"}]
    };
    
    // Create force simulation
    const width = document.getElementById('graph').clientWidth;
    const height = 600;
    
    const simulation = d3.forceSimulation(data.nodes)
      .force('link', d3.forceLink(data.links).id(d => d.id))
      .force('charge', d3.forceManyBody().strength(-100))
      .force('center', d3.forceCenter(width / 2, height / 2));
    
    // Create SVG
    const svg = d3.select('#graph')
      .append('svg')
      .attr('width', width)
      .attr('height', height);
    
    // Add links
    const link = svg.append('g')
      .attr('class', 'links')
      .selectAll('line')
      .data(data.links)
      .join('line')
      .attr('stroke', '#999')
      .attr('stroke-width', 1);
    
    // Add nodes
    const node = svg.append('g')
      .attr('class', 'nodes')
      .selectAll('circle')
      .data(data.nodes)
      .join('circle')
      .attr('r', 5)
      .attr('fill', d => getColor(d.type))
      .call(drag(simulation));
    
    // Add labels
    const text = svg.append('g')
      .selectAll('text')
      .data(data.nodes)
      .join('text')
      .text(d => d.name)
      .attr('font-size', 10)
      .attr('dx', 8)
      .attr('dy', 3);
    
    // Update positions on simulation tick
    simulation.on('tick', () => {
      link
        .attr('x1', d => d.source.x)
        .attr('y1', d => d.source.y)
        .attr('x2', d => d.target.x)
        .attr('y2', d => d.target.y);
      
      node
        .attr('cx', d => d.x)
        .attr('cy', d => d.y);
      
      text
        .attr('x', d => d.x)
        .attr('y', d => d.y);
    });
    
    // Drag functionality
    function drag(simulation) {
      function dragstarted(event) {
        if (!event.active) simulation.alphaTarget(0.3).restart();
        event.subject.fx = event.subject.x;
        event.subject.fy = event.subject.y;
      }
      
      function dragged(event) {
        event.subject.fx = event.x;
        event.subject.fy = event.y;
      }
      
      function dragended(event) {
        if (!event.active) simulation.alphaTarget(0);
        event.subject.fx = null;
        event.subject.fy = null;
      }
      
      return d3.drag()
        .on('start', dragstarted)
        .on('drag', dragged)
        .on('end', dragended);
    }
    
    // Color function
    function getColor(type) {
      const colors = {
        person: '#4285F4',
        project: '#EA4335',
        organization: '#FBBC05',
        location: '#34A853',
        event: '#8F00FF',
        default: '#999999'
      };
      return colors[type] || colors.default;
    }
  </script>
</body>
</html>