{
  "timestamp": "2025-03-05T00:58:27.855Z",
  "testSuites": [
    {
      "name": "Performance Tests",
      "command": "npx jest tests/performance",
      "required": false,
      "status": "passed",
      "output": "\nğŸ” \u001b[1m\u001b[36mUltraLink Test Suite Starting\u001b[0m\n\n  console.log\n    Performance - Dataset Creation (small):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.91 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.20 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Dataset Creation (medium):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 3.98 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.03 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 1.71 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Dataset Creation (large):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 16.10 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 1.64 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 2.03 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: -3.46 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Find by Type (small):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.15 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.02 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Find by Attribute (small):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.04 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.02 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Get Relationships (small):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.07 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Find by Type (medium):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.07 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.05 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Find by Attribute (medium):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.18 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.02 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.22 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Get Relationships (medium):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.01 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Find by Type (large):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.20 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.20 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Find by Attribute (large):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.43 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.83 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Get Relationships (large):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.01 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - JSON Export (small):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.23 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.07 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - GraphML Export (small):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.41 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.03 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.20 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - JSON Export (medium):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.66 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.80 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.34 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.69 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - GraphML Export (medium):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 1.04 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.02 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 1.69 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - JSON Export (large):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 2.54 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 3.94 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 1.39 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 2.64 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - GraphML Export (large):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 5.06 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 1.92 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 2.52 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: -3.74 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Full Blob Export (small):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 1.22 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.50 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.80 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Compressed Full Blob Export (small):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 1.83 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.03 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 1.01 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Full Blob Import (small):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 0.50 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 0.15 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Full Blob Export (medium):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 7.25 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 0.14 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 0.00 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: 7.37 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Compressed Full Blob Export (medium):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 18.55 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: 5.17 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: 4.48 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: -13.52 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance - Full Blob Import (medium):\n\n      at log (tests/performance/large-dataset.test.js:55:11)\n\n  console.log\n      Duration: 5.07 ms\n\n      at log (tests/performance/large-dataset.test.js:56:11)\n\n  console.log\n      Memory delta:\n\n      at log (tests/performance/large-dataset.test.js:57:11)\n\n  console.log\n        RSS: -0.98 MB\n\n      at log (tests/performance/large-dataset.test.js:58:11)\n\n  console.log\n        Heap total: -1.02 MB\n\n      at log (tests/performance/large-dataset.test.js:59:11)\n\n  console.log\n        Heap used: -12.34 MB\n\n      at log (tests/performance/large-dataset.test.js:60:11)\n\n  console.log\n\n\n      at log (tests/performance/large-dataset.test.js:61:11)\n\n  console.log\n    Performance results saved to /Users/tetra/Documents/GitHub/ultralink/output/performance/performance-2025-03-05T00-58-28-806Z.json\n\n      at log (tests/performance/large-dataset.test.js:78:11)\n\nâœ… \u001b[32mtests/performance/large-dataset.test.js\u001b[0m - 25/25 tests passed\n\nğŸ“Š \u001b[1m\u001b[36mTest Summary\u001b[0m\n   Total Test Suites: 1\n   Total Tests: 25\n   Passed: \u001b[32m25\u001b[0m\n   Failed: \u001b[31m0\u001b[0m\n   Time: 0.37s\n\nâœ… \u001b[32mAll tests passed successfully!\u001b[0m\n\n",
      "error": null,
      "exitCode": 0
    },
    {
      "name": "Unit Tests",
      "command": "npx jest tests/unit",
      "required": true,
      "status": "failed",
      "output": "\nğŸ” \u001b[1m\u001b[36mUltraLink Test Suite Starting\u001b[0m\n\nâœ… \u001b[32mtests/unit/entity.test.js\u001b[0m - 13/13 tests passed\nâŒ \u001b[31mtests/unit/ultralink.test.js\u001b[0m - 17/25 tests passed\nâŒ \u001b[31mtests/unit/data-export.test.js\u001b[0m - 4/9 tests passed\n\nğŸ“Š \u001b[1m\u001b[36mTest Summary\u001b[0m\n   Total Test Suites: 3\n   Total Tests: 47\n   Passed: \u001b[32m34\u001b[0m\n   Failed: \u001b[31m13\u001b[0m\n   Time: 0.16s\n\nâŒ \u001b[1m\u001b[31mFailed Tests Details:\u001b[0m\n\n1. \u001b[31mUltraLink â€º Entity Management â€º should throw an error when updating a non-existent entity\u001b[0m\n   ğŸ“„ File: tests/unit/ultralink.test.js\n   ğŸ”´ expect(received).toThrow()\n\nReceived function did not throw\n\n2. \u001b[31mUltraLink â€º Entity Management â€º should delete an entity with deleteEntity method\u001b[0m\n   ğŸ“„ File: tests/unit/ultralink.test.js\n   ğŸ”´ TypeError: Cannot read properties of undefined (reading 'entries')\n\n3. \u001b[31mUltraLink â€º Relationship Management â€º should throw an error when adding a link with non-existent source\u001b[0m\n   ğŸ“„ File: tests/unit/ultralink.test.js\n   ğŸ”´ expect(received).toThrow(expected)\n\nExpected pattern: /Source entity not found: nonexistent/\nReceived message: \"Source entity \\\"nonexistent\\\" not found\"\n\n      18 |   // Validate entities exist\n      19 |   if (!this.entities.has(sourceId)) {\n    > 20 |     throw new Error(`Source entity \"${sourceId}\" not found`);\n         |           ^\n      21 |   }\n      22 |   if (!this.entities.has(targetId)) {\n      23 |     throw new Error(`Target entity \"${targetId}\" not found`);\n\n4. \u001b[31mUltraLink â€º Relationship Management â€º should throw an error when adding a link with non-existent target\u001b[0m\n   ğŸ“„ File: tests/unit/ultralink.test.js\n   ğŸ”´ expect(received).toThrow(expected)\n\nExpected pattern: /Target entity not found: nonexistent/\nReceived message: \"Target entity \\\"nonexistent\\\" not found\"\n\n      21 |   }\n      22 |   if (!this.entities.has(targetId)) {\n    > 23 |     throw new Error(`Target entity \"${targetId}\" not found`);\n         |           ^\n      24 |   }\n      25 |\n      26 |   // Create relationship object\n\n5. \u001b[31mUltraLink â€º Relationship Management â€º should delete a relationship\u001b[0m\n   ğŸ“„ File: tests/unit/ultralink.test.js\n   ğŸ”´ TypeError: Cannot read properties of undefined (reading 'has')\n\n6. \u001b[31mUltraLink â€º Relationship Management â€º should return false when deleting a non-existent relationship\u001b[0m\n   ğŸ“„ File: tests/unit/ultralink.test.js\n   ğŸ”´ TypeError: Cannot read properties of undefined (reading 'has')\n\n7. \u001b[31mUltraLink â€º Data Export â€º should export to CSV format\u001b[0m\n   ğŸ“„ File: tests/unit/ultralink.test.js\n   ğŸ”´ Entity with ID \"person1\" already exists. Set allowOverwrite: true in config to override.\n\n8. \u001b[31mUltraLink â€º Full Blob Export/Import â€º should export a compressed full blob\u001b[0m\n   ğŸ“„ File: tests/unit/ultralink.test.js\n   ğŸ”´ expect(received).toBe(expected) // Object.is equality\n\nExpected: \"string\"\nReceived: \"object\"\n\n9. \u001b[31mUltraLink Data Export â€º JSON Export â€º should export JSON with vectors when requested\u001b[0m\n   ğŸ“„ File: tests/unit/data-export.test.js\n   ğŸ”´ expect(received).toBeDefined()\n\nReceived: undefined\n\n10. \u001b[31mUltraLink Data Export â€º KIF Format Export â€º should export to KIF format with correct structure\u001b[0m\n   ğŸ“„ File: tests/unit/data-export.test.js\n   ğŸ”´ expect(received).toContain(expected) // indexOf\n\nExpected substring: \"(= (startDate-manages person1 project1) \\\"2023-01-01\\\")\"\nReceived string:    \";; UltraLink Knowledge Interchange Format (KIF) Export\n;; Generated: 2025-03-05T00:58:29.291Z\n;; Entities and their attributes\n(instance person1 Person)\n(name person1 \\\"Alice\\\")\n(age person1 30)Â·\n(instance person2 Person)\n(name person2 \\\"Bob\\\")\n(age person2 25)Â·\n(instance project1 Project)\n(title project1 \\\"Project Alpha\\\")\n(status project1 \\\"active\\\")Â·\n;; Relationships\n(manages person1 project1)\n(contributes_to person2 project1)Â·\n;; Meta-knowledge\n(= (entityCount UltraLinkExport) 3)\n(= (relationshipCount UltraLinkExport) 2)\n(= (exportDate UltraLinkExport) \\\"2025-03-05T00:58:29.291Z\\\")\n(= (exportVersion UltraLinkExport) \\\"1.0\\\")Â·\n;; Functions\n(deffunction relationshipCount (?kb)\n  :documentation \\\"Returns the total number of relationships in a knowledge base\\\"\n  :return-type Integer)Â·\n(deffunction entityCount (?kb)\n  :documentation \\\"Returns the total number of entities in a knowledge base\\\"\n  :return-type Integer)Â·\n;; Rules\n(defrule temporal-ordering\n  :documentation \\\"Rule for temporal ordering of events\\\"\n  (and (instance ?e1 Event)\n       (instance ?e2 Event)\n       (date ?e1 ?d1)\n       (date ?e2 ?d2)\n       (evaluate ?before (string< ?d1 ?d2)))\n  (before ?e1 ?e2))\n\"\n\n11. \u001b[31mUltraLink Data Export â€º KIF Format Export â€º should include meta-knowledge when requested\u001b[0m\n   ğŸ“„ File: tests/unit/data-export.test.js\n   ğŸ”´ expect(received).toContain(expected) // indexOf\n\nExpected substring: \"(= (creationDate UltraLinkExport)\"\nReceived string:    \";; UltraLink Knowledge Interchange Format (KIF) Export\n;; Generated: 2025-03-05T00:58:29.293Z\n;; Entities and their attributes\n(instance person1 Person)\n(name person1 \\\"Alice\\\")Â·\n(instance person2 Person)\n(name person2 \\\"Bob\\\")Â·\n;; Relationships\n(knows person1 person2)Â·\n;; Meta-knowledge\n(= (entityCount UltraLinkExport) 2)\n(= (relationshipCount UltraLinkExport) 1)\n(= (exportDate UltraLinkExport) \\\"2025-03-05T00:58:29.293Z\\\")\n(= (exportVersion UltraLinkExport) \\\"1.0\\\")Â·\n;; Functions\n(deffunction relationshipCount (?kb)\n  :documentation \\\"Returns the total number of relationships in a knowledge base\\\"\n  :return-type Integer)Â·\n(deffunction entityCount (?kb)\n  :documentation \\\"Returns the total number of entities in a knowledge base\\\"\n  :return-type Integer)Â·\n;; Rules\n(defrule temporal-ordering\n  :documentation \\\"Rule for temporal ordering of events\\\"\n  (and (instance ?e1 Event)\n       (instance ?e2 Event)\n       (date ?e1 ?d1)\n       (date ?e2 ?d2)\n       (evaluate ?before (string< ?d1 ?d2)))\n  (before ?e1 ?e2))\n\"\n\n12. \u001b[31mUltraLink Data Export â€º KIF Format Export â€º should include functions and rules when requested\u001b[0m\n   ğŸ“„ File: tests/unit/data-export.test.js\n   ğŸ”´ expect(received).toContain(expected) // indexOf\n\nExpected substring: \"(deffunction relationshipCount (?x)\"\nReceived string:    \";; UltraLink Knowledge Interchange Format (KIF) Export\n;; Generated: 2025-03-05T00:58:29.293Z\n;; Entities and their attributes\n;; RelationshipsÂ·\n;; Meta-knowledge\n(= (entityCount UltraLinkExport) 0)\n(= (relationshipCount UltraLinkExport) 0)\n(= (exportDate UltraLinkExport) \\\"2025-03-05T00:58:29.293Z\\\")\n(= (exportVersion UltraLinkExport) \\\"1.0\\\")Â·\n;; Functions\n(deffunction relationshipCount (?kb)\n  :documentation \\\"Returns the total number of relationships in a knowledge base\\\"\n  :return-type Integer)Â·\n(deffunction entityCount (?kb)\n  :documentation \\\"Returns the total number of entities in a knowledge base\\\"\n  :return-type Integer)Â·\n;; Rules\n(defrule temporal-ordering\n  :documentation \\\"Rule for temporal ordering of events\\\"\n  (and (instance ?e1 Event)\n       (instance ?e2 Event)\n       (date ?e1 ?d1)\n       (date ?e2 ?d2)\n       (evaluate ?before (string< ?d1 ?d2)))\n  (before ?e1 ?e2))\n\"\n\n13. \u001b[31mUltraLink Data Export â€º KIF Format Export â€º should handle complex entity attributes correctly\u001b[0m\n   ğŸ“„ File: tests/unit/data-export.test.js\n   ğŸ”´ expect(received).toContain(expected) // indexOf\n\nExpected substring: \"(boolean test-entity true)\"\nReceived string:    \";; UltraLink Knowledge Interchange Format (KIF) Export\n;; Generated: 2025-03-05T00:58:29.293Z\n;; Entities and their attributes\n(instance test-entity Complex_type)\n(name with spaces test-entity \\\"Test Entity\\\")\n(numeric test-entity 42)\n(boolean test-entity \\\"true\\\")\n(nested.property test-entity \\\"nested value\\\")\n(special\\\"characters test-entity \\\"value with \\\"quotes\\\"\\\")Â·\n;; RelationshipsÂ·\n;; Meta-knowledge\n(= (entityCount UltraLinkExport) 1)\n(= (relationshipCount UltraLinkExport) 0)\n(= (exportDate UltraLinkExport) \\\"2025-03-05T00:58:29.294Z\\\")\n(= (exportVersion UltraLinkExport) \\\"1.0\\\")Â·\n;; Functions\n(deffunction relationshipCount (?kb)\n  :documentation \\\"Returns the total number of relationships in a knowledge base\\\"\n  :return-type Integer)Â·\n(deffunction entityCount (?kb)\n  :documentation \\\"Returns the total number of entities in a knowledge base\\\"\n  :return-type Integer)Â·\n;; Rules\n(defrule temporal-ordering\n  :documentation \\\"Rule for temporal ordering of events\\\"\n  (and (instance ?e1 Event)\n       (instance ?e2 Event)\n       (date ?e1 ?d1)\n       (date ?e2 ?d2)\n       (evaluate ?before (string< ?d1 ?d2)))\n  (before ?e1 ?e2))\n\"\n\nâ— \u001b[33mCheck the failed tests and fix the issues before proceeding.\u001b[0m\n\n",
      "error": "Command failed: npx jest tests/unit\nPASS tests/unit/entity.test.js\n  Entity\n    Constructor\n      âœ“ should create an entity with the specified properties (1 ms)\n      âœ“ should create an entity with default empty attributes when not provided\n      âœ“ should handle complex attribute objects\n    Link Management\n      âœ“ should add a link with addLink method\n      âœ“ should use default link type when not specified (1 ms)\n      âœ“ should store metadata with links\n      âœ“ should add multiple links to different targets\n      âœ“ should allow multiple links to the same target with different types\n    JSON Serialization\n      âœ“ should properly serialize an entity to JSON (1 ms)\n      âœ“ should handle empty entities correctly\n    Edge Cases\n      âœ“ should handle entities with special characters in IDs\n      âœ“ should handle very long attribute values\n      âœ“ should maintain link order as added\n\nFAIL tests/unit/ultralink.test.js\n  UltraLink\n    Constructor\n      âœ“ should create an UltraLink instance with default options (1 ms)\n      âœ“ should create an UltraLink instance with custom options\n    Entity Management\n      âœ“ should add an entity with addEntity method (1 ms)\n      âœ“ should retrieve an entity with getEntity method\n      âœ“ should return null when getting a non-existent entity\n      âœ“ should update an entity with updateEntity method\n      âœ• should throw an error when updating a non-existent entity\n      âœ• should delete an entity with deleteEntity method\n      âœ“ should return false when deleting a non-existent entity\n      âœ“ should find entities by type (1 ms)\n      âœ“ should find entities by attribute value\n      âœ“ should find entities with custom filter\n    Relationship Management\n      âœ“ should add a relationship with addLink method\n      âœ• should throw an error when adding a link with non-existent source (8 ms)\n      âœ• should throw an error when adding a link with non-existent target (1 ms)\n      âœ“ should get relationships for an entity\n      âœ“ should filter relationships by type\n      âœ“ should get incoming relationships (backlinks)\n      âœ• should delete a relationship (1 ms)\n      âœ• should return false when deleting a non-existent relationship\n    Data Export\n      âœ“ should export to JSON format\n      âœ“ should export to GraphML format (2 ms)\n      âœ• should export to CSV format\n    Full Blob Export/Import\n      âœ“ should export and import a full blob (1 ms)\n      âœ• should export a compressed full blob (1 ms)\n\n  â— UltraLink â€º Entity Management â€º should throw an error when updating a non-existent entity\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n       99 |       expect(() => {\n      100 |         ultralink.updateEntity('nonexistent', { name: 'New Name' });\n    > 101 |       }).toThrow();\n          |          ^\n      102 |     });\n      103 |     \n      104 |     it('should delete an entity with deleteEntity method', () => {\n\n      at Object.toThrow (tests/unit/ultralink.test.js:101:10)\n\n  â— UltraLink â€º Entity Management â€º should delete an entity with deleteEntity method\n\n    TypeError: Cannot read properties of undefined (reading 'entries')\n\n      71 |   \n      72 |   // Remove all relationships involving this entity\n    > 73 |   for (const [key, rel] of this.links.entries()) {\n         |                                       ^\n      74 |     if (rel.source === id || rel.target === id) {\n      75 |       this.links.delete(key);\n      76 |     }\n\n      at UltraLink.entries (src/lib/entity-manager.js:73:39)\n      at UltraLink.call [as deleteEntity] (src/ultralink.js:79:39)\n      at Object.deleteEntity (tests/unit/ultralink.test.js:107:32)\n\n  â— UltraLink â€º Relationship Management â€º should throw an error when adding a link with non-existent source\n\n    expect(received).toThrow(expected)\n\n    Expected pattern: /Source entity not found: nonexistent/\n    Received message: \"Source entity \\\"nonexistent\\\" not found\"\n\n          18 |   // Validate entities exist\n          19 |   if (!this.entities.has(sourceId)) {\n        > 20 |     throw new Error(`Source entity \"${sourceId}\" not found`);\n             |           ^\n          21 |   }\n          22 |   if (!this.entities.has(targetId)) {\n          23 |     throw new Error(`Target entity \"${targetId}\" not found`);\n\n      at UltraLink.addRelationship (src/lib/relationship-manager.js:20:11)\n      at UltraLink.call [as addRelationship] (src/ultralink.js:101:48)\n      at UltraLink.addRelationship [as addLink] (src/ultralink.js:114:17)\n      at addLink (tests/unit/ultralink.test.js:188:19)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/unit/ultralink.test.js:189:10)\n      at Object.toThrow (tests/unit/ultralink.test.js:189:10)\n\n  â— UltraLink â€º Relationship Management â€º should throw an error when adding a link with non-existent target\n\n    expect(received).toThrow(expected)\n\n    Expected pattern: /Target entity not found: nonexistent/\n    Received message: \"Target entity \\\"nonexistent\\\" not found\"\n\n          21 |   }\n          22 |   if (!this.entities.has(targetId)) {\n        > 23 |     throw new Error(`Target entity \"${targetId}\" not found`);\n             |           ^\n          24 |   }\n          25 |\n          26 |   // Create relationship object\n\n      at UltraLink.addRelationship (src/lib/relationship-manager.js:23:11)\n      at UltraLink.call [as addRelationship] (src/ultralink.js:101:48)\n      at UltraLink.addRelationship [as addLink] (src/ultralink.js:114:17)\n      at addLink (tests/unit/ultralink.test.js:194:19)\n      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)\n      at Object.toThrow (tests/unit/ultralink.test.js:195:10)\n      at Object.toThrow (tests/unit/ultralink.test.js:195:10)\n\n  â— UltraLink â€º Relationship Management â€º should delete a relationship\n\n    TypeError: Cannot read properties of undefined (reading 'has')\n\n      492 |     \n      493 |     // Delete from links map\n    > 494 |     if (this.links.has(sourceId)) {\n          |                    ^\n      495 |       this.links.get(sourceId).delete(`${targetId}-${type}`);\n      496 |     }\n      497 |     \n\n      at UltraLink.has [as deleteLink] (src/ultralink.js:494:20)\n      at Object.deleteLink (tests/unit/ultralink.test.js:240:32)\n\n  â— UltraLink â€º Relationship Management â€º should return false when deleting a non-existent relationship\n\n    TypeError: Cannot read properties of undefined (reading 'has')\n\n      492 |     \n      493 |     // Delete from links map\n    > 494 |     if (this.links.has(sourceId)) {\n          |                    ^\n      495 |       this.links.get(sourceId).delete(`${targetId}-${type}`);\n      496 |     }\n      497 |     \n\n      at UltraLink.has [as deleteLink] (src/ultralink.js:494:20)\n      at Object.deleteLink (tests/unit/ultralink.test.js:249:32)\n\n  â— UltraLink â€º Data Export â€º should export to CSV format\n\n    Entity with ID \"person1\" already exists. Set allowOverwrite: true in config to override.\n\n      16 |   // Prevent overwriting existing entities unless explicitly allowed\n      17 |   if (this.entities.has(id) && !this.config.allowOverwrite) {\n    > 18 |     throw new Error(`Entity with ID \"${id}\" already exists. Set allowOverwrite: true in config to override.`);\n         |           ^\n      19 |   }\n      20 |\n      21 |   const entity = {\n\n      at UltraLink.addEntity (src/lib/entity-manager.js:18:11)\n      at UltraLink.call [as addEntity] (src/ultralink.js:50:36)\n      at Object.addEntity (tests/unit/ultralink.test.js:341:17)\n\n  â— UltraLink â€º Full Blob Export/Import â€º should export a compressed full blob\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"string\"\n    Received: \"object\"\n\n      404 |       \n      405 |       // Verify it's a string (compressed blobs are base64 strings)\n    > 406 |       expect(typeof compressedBlob).toBe('string');\n          |                                     ^\n      407 |       \n      408 |       // Import from compressed blob\n      409 |       const newUltralink = new UltraLink();\n\n      at Object.toBe (tests/unit/ultralink.test.js:406:37)\n\nFAIL tests/unit/data-export.test.js\n  UltraLink Data Export\n    JSON Export\n      âœ“ should export to JSON format (1 ms)\n      âœ“ should export to JSON with pretty formatting\n      âœ• should export JSON with vectors when requested\n    GraphML Export\n      âœ“ should export to GraphML format\n    CSV Export\n      âœ“ should export to CSV format\n    KIF Format Export\n      âœ• should export to KIF format with correct structure (2 ms)\n      âœ• should include meta-knowledge when requested\n      âœ• should include functions and rules when requested\n      âœ• should handle complex entity attributes correctly (1 ms)\n\n  â— UltraLink Data Export â€º JSON Export â€º should export JSON with vectors when requested\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n      86 |       const json = JSON.parse(jsonStr);\n      87 |       const exportedEntity = json.entities.find(e => e.id === 'person1');\n    > 88 |       expect(exportedEntity.vector).toBeDefined();\n         |                                     ^\n      89 |       expect(Array.isArray(exportedEntity.vector)).toBe(true);\n      90 |       \n      91 |       // Check vector values with tolerance for Float32Array precision differences\n\n      at Object.toBeDefined (tests/unit/data-export.test.js:88:37)\n\n  â— UltraLink Data Export â€º KIF Format Export â€º should export to KIF format with correct structure\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"(= (startDate-manages person1 project1) \\\"2023-01-01\\\")\"\n    Received string:    \";; UltraLink Knowledge Interchange Format (KIF) Export\n    ;; Generated: 2025-03-05T00:58:29.291Z\n    ;; Entities and their attributes\n    (instance person1 Person)\n    (name person1 \\\"Alice\\\")\n    (age person1 30)Â·\n    (instance person2 Person)\n    (name person2 \\\"Bob\\\")\n    (age person2 25)Â·\n    (instance project1 Project)\n    (title project1 \\\"Project Alpha\\\")\n    (status project1 \\\"active\\\")Â·\n    ;; Relationships\n    (manages person1 project1)\n    (contributes_to person2 project1)Â·\n    ;; Meta-knowledge\n    (= (entityCount UltraLinkExport) 3)\n    (= (relationshipCount UltraLinkExport) 2)\n    (= (exportDate UltraLinkExport) \\\"2025-03-05T00:58:29.291Z\\\")\n    (= (exportVersion UltraLinkExport) \\\"1.0\\\")Â·\n    ;; Functions\n    (deffunction relationshipCount (?kb)\n      :documentation \\\"Returns the total number of relationships in a knowledge base\\\"\n      :return-type Integer)Â·\n    (deffunction entityCount (?kb)\n      :documentation \\\"Returns the total number of entities in a knowledge base\\\"\n      :return-type Integer)Â·\n    ;; Rules\n    (defrule temporal-ordering\n      :documentation \\\"Rule for temporal ordering of events\\\"\n      (and (instance ?e1 Event)\n           (instance ?e2 Event)\n           (date ?e1 ?d1)\n           (date ?e2 ?d2)\n           (evaluate ?before (string< ?d1 ?d2)))\n      (before ?e1 ?e2))\n    \"\n\n      180 |       \n      181 |       // Check relationship attributes\n    > 182 |       expect(kif).toContain('(= (startDate-manages person1 project1) \"2023-01-01\")');\n          |                   ^\n      183 |       expect(kif).toContain('(= (role-contributes_to person2 project1) \"developer\")');\n      184 |     });\n      185 |     \n\n      at Object.toContain (tests/unit/data-export.test.js:182:19)\n\n  â— UltraLink Data Export â€º KIF Format Export â€º should include meta-knowledge when requested\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"(= (creationDate UltraLinkExport)\"\n    Received string:    \";; UltraLink Knowledge Interchange Format (KIF) Export\n    ;; Generated: 2025-03-05T00:58:29.293Z\n    ;; Entities and their attributes\n    (instance person1 Person)\n    (name person1 \\\"Alice\\\")Â·\n    (instance person2 Person)\n    (name person2 \\\"Bob\\\")Â·\n    ;; Relationships\n    (knows person1 person2)Â·\n    ;; Meta-knowledge\n    (= (entityCount UltraLinkExport) 2)\n    (= (relationshipCount UltraLinkExport) 1)\n    (= (exportDate UltraLinkExport) \\\"2025-03-05T00:58:29.293Z\\\")\n    (= (exportVersion UltraLinkExport) \\\"1.0\\\")Â·\n    ;; Functions\n    (deffunction relationshipCount (?kb)\n      :documentation \\\"Returns the total number of relationships in a knowledge base\\\"\n      :return-type Integer)Â·\n    (deffunction entityCount (?kb)\n      :documentation \\\"Returns the total number of entities in a knowledge base\\\"\n      :return-type Integer)Â·\n    ;; Rules\n    (defrule temporal-ordering\n      :documentation \\\"Rule for temporal ordering of events\\\"\n      (and (instance ?e1 Event)\n           (instance ?e2 Event)\n           (date ?e1 ?d1)\n           (date ?e2 ?d2)\n           (evaluate ?before (string< ?d1 ?d2)))\n      (before ?e1 ?e2))\n    \"\n\n      196 |       // Verify meta-knowledge sections\n      197 |       expect(kif).toContain(';; Meta-knowledge');\n    > 198 |       expect(kif).toContain('(= (creationDate UltraLinkExport)');\n          |                   ^\n      199 |       expect(kif).toContain('(= (entityCount UltraLinkExport) 2)');\n      200 |       expect(kif).toContain('(= (relationshipCount UltraLinkExport) 1)');\n      201 |     });\n\n      at Object.toContain (tests/unit/data-export.test.js:198:19)\n\n  â— UltraLink Data Export â€º KIF Format Export â€º should include functions and rules when requested\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"(deffunction relationshipCount (?x)\"\n    Received string:    \";; UltraLink Knowledge Interchange Format (KIF) Export\n    ;; Generated: 2025-03-05T00:58:29.293Z\n    ;; Entities and their attributes\n    ;; RelationshipsÂ·\n    ;; Meta-knowledge\n    (= (entityCount UltraLinkExport) 0)\n    (= (relationshipCount UltraLinkExport) 0)\n    (= (exportDate UltraLinkExport) \\\"2025-03-05T00:58:29.293Z\\\")\n    (= (exportVersion UltraLinkExport) \\\"1.0\\\")Â·\n    ;; Functions\n    (deffunction relationshipCount (?kb)\n      :documentation \\\"Returns the total number of relationships in a knowledge base\\\"\n      :return-type Integer)Â·\n    (deffunction entityCount (?kb)\n      :documentation \\\"Returns the total number of entities in a knowledge base\\\"\n      :return-type Integer)Â·\n    ;; Rules\n    (defrule temporal-ordering\n      :documentation \\\"Rule for temporal ordering of events\\\"\n      (and (instance ?e1 Event)\n           (instance ?e2 Event)\n           (date ?e1 ?d1)\n           (date ?e2 ?d2)\n           (evaluate ?before (string< ?d1 ?d2)))\n      (before ?e1 ?e2))\n    \"\n\n      212 |       // Verify functions section\n      213 |       expect(kif).toContain(';; Functions');\n    > 214 |       expect(kif).toContain('(deffunction relationshipCount (?x)');\n          |                   ^\n      215 |       \n      216 |       // Verify rules section\n      217 |       expect(kif).toContain(';; Rules');\n\n      at Object.toContain (tests/unit/data-export.test.js:214:19)\n\n  â— UltraLink Data Export â€º KIF Format Export â€º should handle complex entity attributes correctly\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"(boolean test-entity true)\"\n    Received string:    \";; UltraLink Knowledge Interchange Format (KIF) Export\n    ;; Generated: 2025-03-05T00:58:29.293Z\n    ;; Entities and their attributes\n    (instance test-entity Complex_type)\n    (name with spaces test-entity \\\"Test Entity\\\")\n    (numeric test-entity 42)\n    (boolean test-entity \\\"true\\\")\n    (nested.property test-entity \\\"nested value\\\")\n    (special\\\"characters test-entity \\\"value with \\\"quotes\\\"\\\")Â·\n    ;; RelationshipsÂ·\n    ;; Meta-knowledge\n    (= (entityCount UltraLinkExport) 1)\n    (= (relationshipCount UltraLinkExport) 0)\n    (= (exportDate UltraLinkExport) \\\"2025-03-05T00:58:29.294Z\\\")\n    (= (exportVersion UltraLinkExport) \\\"1.0\\\")Â·\n    ;; Functions\n    (deffunction relationshipCount (?kb)\n      :documentation \\\"Returns the total number of relationships in a knowledge base\\\"\n      :return-type Integer)Â·\n    (deffunction entityCount (?kb)\n      :documentation \\\"Returns the total number of entities in a knowledge base\\\"\n      :return-type Integer)Â·\n    ;; Rules\n    (defrule temporal-ordering\n      :documentation \\\"Rule for temporal ordering of events\\\"\n      (and (instance ?e1 Event)\n           (instance ?e2 Event)\n           (date ?e1 ?d1)\n           (date ?e2 ?d2)\n           (evaluate ?before (string< ?d1 ?d2)))\n      (before ?e1 ?e2))\n    \"\n\n      239 |       expect(kif).toContain('(name with spaces test-entity \"Test Entity\")');\n      240 |       expect(kif).toContain('(numeric test-entity 42)');\n    > 241 |       expect(kif).toContain('(boolean test-entity true)');\n          |                   ^\n      242 |       expect(kif).toContain('(nested.property test-entity \"nested value\")');\n      243 |       expect(kif).toContain('(special\"characters test-entity \"value with \\\\\"quotes\\\\\"\")');\n      244 |     });\n\n      at Object.toContain (tests/unit/data-export.test.js:241:19)\n\nTest Suites: 2 failed, 1 passed, 3 total\nTests:       13 failed, 34 passed, 47 total\nSnapshots:   0 total\nTime:        0.157 s, estimated 1 s\nRan all test suites matching /tests\\/unit/i.\n",
      "exitCode": 1
    },
    {
      "name": "Integration Tests",
      "command": "npx jest tests/integration",
      "required": true,
      "status": "failed",
      "output": "\nğŸ” \u001b[1m\u001b[36mUltraLink Test Suite Starting\u001b[0m\n\nâŒ \u001b[31mtests/integration/parser-store.test.js\u001b[0m - 0/5 tests passed\nâœ… \u001b[32mtests/integration/research-team.test.js\u001b[0m - 12/12 tests passed\nâœ… \u001b[32mtests/integration/research-team-export.test.js\u001b[0m - 5/5 tests passed\nâŒ \u001b[31mtests/integration/html-website-features.test.js\u001b[0m - 2/9 tests passed\nâŒ \u001b[31mtests/integration/export-formats.test.js\u001b[0m - 10/14 tests passed\n\nğŸ“Š \u001b[1m\u001b[36mTest Summary\u001b[0m\n   Total Test Suites: 5\n   Total Tests: 45\n   Passed: \u001b[32m29\u001b[0m\n   Failed: \u001b[31m16\u001b[0m\n   Time: 0.33s\n\nâŒ \u001b[1m\u001b[31mFailed Tests Details:\u001b[0m\n\n1. \u001b[31mUltraLinkParser and EntityStore Integration â€º Basic Parsing and Entity Creation â€º should parse Obsidian-style links and create corresponding entities\u001b[0m\n   ğŸ“„ File: tests/integration/parser-store.test.js\n   ğŸ”´ TypeError: EntityStore is not a constructor\n   ğŸ”´ TypeError: Cannot read properties of undefined (reading 'clear')\n\n2. \u001b[31mUltraLinkParser and EntityStore Integration â€º Basic Parsing and Entity Creation â€º should handle documents with duplicate links\u001b[0m\n   ğŸ“„ File: tests/integration/parser-store.test.js\n   ğŸ”´ TypeError: EntityStore is not a constructor\n   ğŸ”´ TypeError: Cannot read properties of undefined (reading 'clear')\n\n3. \u001b[31mUltraLinkParser and EntityStore Integration â€º Custom Parser Integration â€º should use custom parsers to extract links in different formats\u001b[0m\n   ğŸ“„ File: tests/integration/parser-store.test.js\n   ğŸ”´ TypeError: EntityStore is not a constructor\n   ğŸ”´ TypeError: Cannot read properties of undefined (reading 'clear')\n\n4. \u001b[31mUltraLinkParser and EntityStore Integration â€º Multi-Document Integration â€º should correctly maintain entity relationships across multiple documents\u001b[0m\n   ğŸ“„ File: tests/integration/parser-store.test.js\n   ğŸ”´ TypeError: EntityStore is not a constructor\n   ğŸ”´ TypeError: Cannot read properties of undefined (reading 'clear')\n\n5. \u001b[31mUltraLinkParser and EntityStore Integration â€º Error Handling â€º should gracefully handle malformed input\u001b[0m\n   ğŸ“„ File: tests/integration/parser-store.test.js\n   ğŸ”´ TypeError: EntityStore is not a constructor\n   ğŸ”´ TypeError: Cannot read properties of undefined (reading 'clear')\n\n6. \u001b[31mHTML Website Features â€º should include zoom and pan controls\u001b[0m\n   ğŸ“„ File: tests/integration/html-website-features.test.js\n   ğŸ”´ expect(received).toContain(expected) // indexOf\n\nExpected substring: \"<div class=\\\"zoom-controls\\\">\"\nReceived string:    \"<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\\\"UTF-8\\\">\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n  <title>HTML Features Test</title>Â·Â·Â·\n  <style>\n    :root {\n      --background: #ffffff;\n      --text: #000000;\n      --link: #0066cc;\n      --accent: #666666;\n      --border: #dddddd;\n    }\n    body {\n      font-family: system-ui, -apple-system, sans-serif;\n      margin: 0;\n      padding: 0;\n      background: var(--background);\n      color: var(--text);\n    }\n    .container {\n      display: grid;\n      grid-template-columns: 300px 1fr;\n      height: 100vh;\n    }\n    .sidebar {\n      padding: 20px;\n      border-right: 1px solid var(--border);\n      overflow-y: auto;\n    }\n    .main {\n      padding: 20px;\n      overflow-y: auto;\n    }\n    h1, h2, h3, h4 {\n      color: var(--text);\n      margin-top: 0;\n    }\n    a {\n      color: var(--link);\n      text-decoration: none;\n    }\n    a:hover {\n      text-decoration: underline;\n    }\n    .entity-list {\n      list-style: none;\n      padding: 0;\n    }\n    .entity-item {\n      padding: 8px;\n      margin: 4px 0;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n    }\n    .entity-type {\n      color: var(--accent);\n      font-size: 0.9em;\n    }\n    #graph {\n      width: 100%;\n      height: 600px;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n    }\n    .search-box {\n      margin-bottom: 20px;\n    }\n    #search-input {\n      width: 100%;\n      padding: 8px;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n      background: var(--background);\n      color: var(--text);\n    }\n  </style>\n  <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\n</head>\n<body>\n  <div class=\\\"container\\\">\n    <div class=\\\"sidebar\\\">\n      <h2>HTML Features Test</h2>\n      <p>Testing HTML website features</p>Â·Â·Â·Â·Â·Â·Â·\n      <div class=\\\"search-box\\\">\n        <input type=\\\"text\\\" id=\\\"search-input\\\" placeholder=\\\"Search entities...\\\" />\n      </div>Â·Â·Â·Â·Â·Â·Â·\n      <h3>Entities</h3>\n      <ul class=\\\"entity-list\\\" id=\\\"entity-list\\\">Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity1\\\" data-type=\\\"person\\\">\n            <a href=\\\"entity1.html\\\">\n              John Doe\n            </a>\n            <div class=\\\"entity-type\\\">person</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity2\\\" data-type=\\\"project\\\">\n            <a href=\\\"entity2.html\\\">\n              Project Alpha\n            </a>\n            <div class=\\\"entity-type\\\">project</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity3\\\" data-type=\\\"resource\\\">\n            <a href=\\\"entity3.html\\\">\n              entity3\n            </a>\n            <div class=\\\"entity-type\\\">resource</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n      </ul>\n    </div>\n    <div class=\\\"main\\\">\n      <div id=\\\"graph\\\"></div>\n      <script>\n        // Graph visualization code\n        const data = {\n          nodes: [\n            {\n                \\\"id\\\": \\\"entity1\\\",\n                \\\"name\\\": \\\"John Doe\\\",\n                \\\"type\\\": \\\"person\\\",\n                \\\"attributes\\\": {\\\"name\\\":\\\"John Doe\\\",\\\"age\\\":30,\\\"email\\\":\\\"john@example.com\\\"}\n              },\n            {\n                \\\"id\\\": \\\"entity2\\\",\n                \\\"name\\\": \\\"Project Alpha\\\",\n                \\\"type\\\": \\\"project\\\",\n                \\\"attributes\\\": {\\\"title\\\":\\\"Project Alpha\\\",\\\"status\\\":\\\"Active\\\",\\\"priority\\\":\\\"High\\\"}\n              },\n            {\n                \\\"id\\\": \\\"entity3\\\",\n                \\\"name\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"resource\\\",\n                \\\"attributes\\\": {\\\"type\\\":\\\"Document\\\",\\\"url\\\":\\\"https://example.com/doc\\\"}\n              }\n          ],\n          links: [\n            {\n                \\\"source\\\": \\\"entity1\\\",\n                \\\"target\\\": \\\"entity2\\\",\n                \\\"type\\\": \\\"manages\\\"\n              },\n            {\n                \\\"source\\\": \\\"entity1\\\",\n                \\\"target\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"created\\\"\n              },\n            {\n                \\\"source\\\": \\\"entity2\\\",\n                \\\"target\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"contains\\\"\n              }\n          ]\n        };Â·\n        const width = document.getElementById('graph').clientWidth;\n        const height = 600;Â·\n        const simulation = d3.forceSimulation(data.nodes)\n          .force('link', d3.forceLink(data.links).id(d => d.id))\n          .force('charge', d3.forceManyBody().strength(-100))\n          .force('center', d3.forceCenter(width / 2, height / 2));Â·\n        const svg = d3.select('#graph')\n          .append('svg')\n          .attr('width', width)\n          .attr('height', height);Â·\n        const link = svg.append('g')\n          .selectAll('line')\n          .data(data.links)\n          .join('line')\n          .attr('stroke', 'var(--border)')\n          .attr('stroke-width', 1);Â·\n        const node = svg.append('g')\n          .selectAll('circle')\n          .data(data.nodes)\n          .join('circle')\n          .attr('r', 5)\n          .attr('fill', 'var(--link)')\n          .call(drag(simulation));Â·\n        node.append('title')\n          .text(d => d.attributes.name || d.attributes.title || d.id);Â·\n        simulation.on('tick', () => {\n          link\n            .attr('x1', d => d.source.x)\n            .attr('y1', d => d.source.y)\n            .attr('x2', d => d.target.x)\n            .attr('y2', d => d.target.y);Â·\n          node\n            .attr('cx', d => d.x)\n            .attr('cy', d => d.y);\n        });Â·\n        // Entity selection functionality\n        window.selectEntityById = function(id) {\n          // Find the selected node\n          const selectedNode = data.nodes.find(function(n) { return n.id === id; });\n          if (!selectedNode) return;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Reset all nodes\n          node.attr('r', 5).attr('stroke', null);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Highlight the selected node\n          const selectedNodeElement = node.filter(function(d) { return d.id === id; })\n            .attr('r', 8)\n            .attr('stroke', 'var(--link)')\n            .attr('stroke-width', 2);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Center and zoom on the selected node\n          const scale = 2;\n          const x = width / 2 - scale * selectedNode.x;\n          const y = height / 2 - scale * selectedNode.y;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          svg.transition().duration(500)\n            .attr('transform', 'translate(' + x + ',' + y + ') scale(' + scale + ')');\n        };Â·\n        function drag(simulation) {\n          function dragstarted(event) {\n            if (!event.active) simulation.alphaTarget(0.3).restart();\n            event.subject.fx = event.subject.x;\n            event.subject.fy = event.subject.y;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          function dragged(event) {\n            event.subject.fx = event.x;\n            event.subject.fy = event.y;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          function dragended(event) {\n            if (!event.active) simulation.alphaTarget(0);\n            event.subject.fx = null;\n            event.subject.fy = null;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          return d3.drag()\n            .on('start', dragstarted)\n            .on('drag', dragged)\n            .on('end', dragended);\n        }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n        // Search functionality\n        const searchInput = document.getElementById('search-input');\n        const entityList = document.getElementById('entity-list');\n        const entityItems = entityList.querySelectorAll('.entity-item');Â·\n        searchInput.addEventListener('input', function() {\n          const searchTerm = this.value.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          entityItems.forEach(item => {\n            const id = item.getAttribute('data-id').toLowerCase();\n            const type = item.getAttribute('data-type').toLowerCase();\n            const text = item.textContent.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n            if (id.includes(searchTerm) || type.includes(searchTerm) || text.includes(searchTerm)) {\n              item.style.display = '';\n            } else {\n              item.style.display = 'none';\n            }\n          });\n        });Â·Â·Â·Â·Â·Â·Â·Â·Â·\n      </script>\n    </div>\n  </div>\n</body>\n</html>\"\n\n7. \u001b[31mHTML Website Features â€º should include clear filters button\u001b[0m\n   ğŸ“„ File: tests/integration/html-website-features.test.js\n   ğŸ”´ expect(received).toContain(expected) // indexOf\n\nExpected substring: \"<button class=\\\"btn\\\" id=\\\"clear-filters\\\">Clear Filters</button>\"\nReceived string:    \"<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\\\"UTF-8\\\">\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n  <title>HTML Features Test</title>Â·Â·Â·\n  <style>\n    :root {\n      --background: #ffffff;\n      --text: #000000;\n      --link: #0066cc;\n      --accent: #666666;\n      --border: #dddddd;\n    }\n    body {\n      font-family: system-ui, -apple-system, sans-serif;\n      margin: 0;\n      padding: 0;\n      background: var(--background);\n      color: var(--text);\n    }\n    .container {\n      display: grid;\n      grid-template-columns: 300px 1fr;\n      height: 100vh;\n    }\n    .sidebar {\n      padding: 20px;\n      border-right: 1px solid var(--border);\n      overflow-y: auto;\n    }\n    .main {\n      padding: 20px;\n      overflow-y: auto;\n    }\n    h1, h2, h3, h4 {\n      color: var(--text);\n      margin-top: 0;\n    }\n    a {\n      color: var(--link);\n      text-decoration: none;\n    }\n    a:hover {\n      text-decoration: underline;\n    }\n    .entity-list {\n      list-style: none;\n      padding: 0;\n    }\n    .entity-item {\n      padding: 8px;\n      margin: 4px 0;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n    }\n    .entity-type {\n      color: var(--accent);\n      font-size: 0.9em;\n    }\n    #graph {\n      width: 100%;\n      height: 600px;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n    }\n    .search-box {\n      margin-bottom: 20px;\n    }\n    #search-input {\n      width: 100%;\n      padding: 8px;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n      background: var(--background);\n      color: var(--text);\n    }\n  </style>\n  <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\n</head>\n<body>\n  <div class=\\\"container\\\">\n    <div class=\\\"sidebar\\\">\n      <h2>HTML Features Test</h2>\n      <p>Testing HTML website features</p>Â·Â·Â·Â·Â·Â·Â·\n      <div class=\\\"search-box\\\">\n        <input type=\\\"text\\\" id=\\\"search-input\\\" placeholder=\\\"Search entities...\\\" />\n      </div>Â·Â·Â·Â·Â·Â·Â·\n      <h3>Entities</h3>\n      <ul class=\\\"entity-list\\\" id=\\\"entity-list\\\">Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity1\\\" data-type=\\\"person\\\">\n            <a href=\\\"entity1.html\\\">\n              John Doe\n            </a>\n            <div class=\\\"entity-type\\\">person</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity2\\\" data-type=\\\"project\\\">\n            <a href=\\\"entity2.html\\\">\n              Project Alpha\n            </a>\n            <div class=\\\"entity-type\\\">project</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity3\\\" data-type=\\\"resource\\\">\n            <a href=\\\"entity3.html\\\">\n              entity3\n            </a>\n            <div class=\\\"entity-type\\\">resource</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n      </ul>\n    </div>\n    <div class=\\\"main\\\">\n      <div id=\\\"graph\\\"></div>\n      <script>\n        // Graph visualization code\n        const data = {\n          nodes: [\n            {\n                \\\"id\\\": \\\"entity1\\\",\n                \\\"name\\\": \\\"John Doe\\\",\n                \\\"type\\\": \\\"person\\\",\n                \\\"attributes\\\": {\\\"name\\\":\\\"John Doe\\\",\\\"age\\\":30,\\\"email\\\":\\\"john@example.com\\\"}\n              },\n            {\n                \\\"id\\\": \\\"entity2\\\",\n                \\\"name\\\": \\\"Project Alpha\\\",\n                \\\"type\\\": \\\"project\\\",\n                \\\"attributes\\\": {\\\"title\\\":\\\"Project Alpha\\\",\\\"status\\\":\\\"Active\\\",\\\"priority\\\":\\\"High\\\"}\n              },\n            {\n                \\\"id\\\": \\\"entity3\\\",\n                \\\"name\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"resource\\\",\n                \\\"attributes\\\": {\\\"type\\\":\\\"Document\\\",\\\"url\\\":\\\"https://example.com/doc\\\"}\n              }\n          ],\n          links: [\n            {\n                \\\"source\\\": \\\"entity1\\\",\n                \\\"target\\\": \\\"entity2\\\",\n                \\\"type\\\": \\\"manages\\\"\n              },\n            {\n                \\\"source\\\": \\\"entity1\\\",\n                \\\"target\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"created\\\"\n              },\n            {\n                \\\"source\\\": \\\"entity2\\\",\n                \\\"target\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"contains\\\"\n              }\n          ]\n        };Â·\n        const width = document.getElementById('graph').clientWidth;\n        const height = 600;Â·\n        const simulation = d3.forceSimulation(data.nodes)\n          .force('link', d3.forceLink(data.links).id(d => d.id))\n          .force('charge', d3.forceManyBody().strength(-100))\n          .force('center', d3.forceCenter(width / 2, height / 2));Â·\n        const svg = d3.select('#graph')\n          .append('svg')\n          .attr('width', width)\n          .attr('height', height);Â·\n        const link = svg.append('g')\n          .selectAll('line')\n          .data(data.links)\n          .join('line')\n          .attr('stroke', 'var(--border)')\n          .attr('stroke-width', 1);Â·\n        const node = svg.append('g')\n          .selectAll('circle')\n          .data(data.nodes)\n          .join('circle')\n          .attr('r', 5)\n          .attr('fill', 'var(--link)')\n          .call(drag(simulation));Â·\n        node.append('title')\n          .text(d => d.attributes.name || d.attributes.title || d.id);Â·\n        simulation.on('tick', () => {\n          link\n            .attr('x1', d => d.source.x)\n            .attr('y1', d => d.source.y)\n            .attr('x2', d => d.target.x)\n            .attr('y2', d => d.target.y);Â·\n          node\n            .attr('cx', d => d.x)\n            .attr('cy', d => d.y);\n        });Â·\n        // Entity selection functionality\n        window.selectEntityById = function(id) {\n          // Find the selected node\n          const selectedNode = data.nodes.find(function(n) { return n.id === id; });\n          if (!selectedNode) return;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Reset all nodes\n          node.attr('r', 5).attr('stroke', null);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Highlight the selected node\n          const selectedNodeElement = node.filter(function(d) { return d.id === id; })\n            .attr('r', 8)\n            .attr('stroke', 'var(--link)')\n            .attr('stroke-width', 2);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Center and zoom on the selected node\n          const scale = 2;\n          const x = width / 2 - scale * selectedNode.x;\n          const y = height / 2 - scale * selectedNode.y;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          svg.transition().duration(500)\n            .attr('transform', 'translate(' + x + ',' + y + ') scale(' + scale + ')');\n        };Â·\n        function drag(simulation) {\n          function dragstarted(event) {\n            if (!event.active) simulation.alphaTarget(0.3).restart();\n            event.subject.fx = event.subject.x;\n            event.subject.fy = event.subject.y;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          function dragged(event) {\n            event.subject.fx = event.x;\n            event.subject.fy = event.y;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          function dragended(event) {\n            if (!event.active) simulation.alphaTarget(0);\n            event.subject.fx = null;\n            event.subject.fy = null;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          return d3.drag()\n            .on('start', dragstarted)\n            .on('drag', dragged)\n            .on('end', dragended);\n        }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n        // Search functionality\n        const searchInput = document.getElementById('search-input');\n        const entityList = document.getElementById('entity-list');\n        const entityItems = entityList.querySelectorAll('.entity-item');Â·\n        searchInput.addEventListener('input', function() {\n          const searchTerm = this.value.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          entityItems.forEach(item => {\n            const id = item.getAttribute('data-id').toLowerCase();\n            const type = item.getAttribute('data-type').toLowerCase();\n            const text = item.textContent.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n            if (id.includes(searchTerm) || type.includes(searchTerm) || text.includes(searchTerm)) {\n              item.style.display = '';\n            } else {\n              item.style.display = 'none';\n            }\n          });\n        });Â·Â·Â·Â·Â·Â·Â·Â·Â·\n      </script>\n    </div>\n  </div>\n</body>\n</html>\"\n\n8. \u001b[31mHTML Website Features â€º should use responsive SVG with viewBox\u001b[0m\n   ğŸ“„ File: tests/integration/html-website-features.test.js\n   ğŸ”´ expect(received).toContain(expected) // indexOf\n\nExpected substring: \".attr('width', '100%')\"\nReceived string:    \"<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\\\"UTF-8\\\">\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n  <title>HTML Features Test</title>Â·Â·Â·\n  <style>\n    :root {\n      --background: #ffffff;\n      --text: #000000;\n      --link: #0066cc;\n      --accent: #666666;\n      --border: #dddddd;\n    }\n    body {\n      font-family: system-ui, -apple-system, sans-serif;\n      margin: 0;\n      padding: 0;\n      background: var(--background);\n      color: var(--text);\n    }\n    .container {\n      display: grid;\n      grid-template-columns: 300px 1fr;\n      height: 100vh;\n    }\n    .sidebar {\n      padding: 20px;\n      border-right: 1px solid var(--border);\n      overflow-y: auto;\n    }\n    .main {\n      padding: 20px;\n      overflow-y: auto;\n    }\n    h1, h2, h3, h4 {\n      color: var(--text);\n      margin-top: 0;\n    }\n    a {\n      color: var(--link);\n      text-decoration: none;\n    }\n    a:hover {\n      text-decoration: underline;\n    }\n    .entity-list {\n      list-style: none;\n      padding: 0;\n    }\n    .entity-item {\n      padding: 8px;\n      margin: 4px 0;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n    }\n    .entity-type {\n      color: var(--accent);\n      font-size: 0.9em;\n    }\n    #graph {\n      width: 100%;\n      height: 600px;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n    }\n    .search-box {\n      margin-bottom: 20px;\n    }\n    #search-input {\n      width: 100%;\n      padding: 8px;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n      background: var(--background);\n      color: var(--text);\n    }\n  </style>\n  <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\n</head>\n<body>\n  <div class=\\\"container\\\">\n    <div class=\\\"sidebar\\\">\n      <h2>HTML Features Test</h2>\n      <p>Testing HTML website features</p>Â·Â·Â·Â·Â·Â·Â·\n      <div class=\\\"search-box\\\">\n        <input type=\\\"text\\\" id=\\\"search-input\\\" placeholder=\\\"Search entities...\\\" />\n      </div>Â·Â·Â·Â·Â·Â·Â·\n      <h3>Entities</h3>\n      <ul class=\\\"entity-list\\\" id=\\\"entity-list\\\">Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity1\\\" data-type=\\\"person\\\">\n            <a href=\\\"entity1.html\\\">\n              John Doe\n            </a>\n            <div class=\\\"entity-type\\\">person</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity2\\\" data-type=\\\"project\\\">\n            <a href=\\\"entity2.html\\\">\n              Project Alpha\n            </a>\n            <div class=\\\"entity-type\\\">project</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity3\\\" data-type=\\\"resource\\\">\n            <a href=\\\"entity3.html\\\">\n              entity3\n            </a>\n            <div class=\\\"entity-type\\\">resource</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n      </ul>\n    </div>\n    <div class=\\\"main\\\">\n      <div id=\\\"graph\\\"></div>\n      <script>\n        // Graph visualization code\n        const data = {\n          nodes: [\n            {\n                \\\"id\\\": \\\"entity1\\\",\n                \\\"name\\\": \\\"John Doe\\\",\n                \\\"type\\\": \\\"person\\\",\n                \\\"attributes\\\": {\\\"name\\\":\\\"John Doe\\\",\\\"age\\\":30,\\\"email\\\":\\\"john@example.com\\\"}\n              },\n            {\n                \\\"id\\\": \\\"entity2\\\",\n                \\\"name\\\": \\\"Project Alpha\\\",\n                \\\"type\\\": \\\"project\\\",\n                \\\"attributes\\\": {\\\"title\\\":\\\"Project Alpha\\\",\\\"status\\\":\\\"Active\\\",\\\"priority\\\":\\\"High\\\"}\n              },\n            {\n                \\\"id\\\": \\\"entity3\\\",\n                \\\"name\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"resource\\\",\n                \\\"attributes\\\": {\\\"type\\\":\\\"Document\\\",\\\"url\\\":\\\"https://example.com/doc\\\"}\n              }\n          ],\n          links: [\n            {\n                \\\"source\\\": \\\"entity1\\\",\n                \\\"target\\\": \\\"entity2\\\",\n                \\\"type\\\": \\\"manages\\\"\n              },\n            {\n                \\\"source\\\": \\\"entity1\\\",\n                \\\"target\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"created\\\"\n              },\n            {\n                \\\"source\\\": \\\"entity2\\\",\n                \\\"target\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"contains\\\"\n              }\n          ]\n        };Â·\n        const width = document.getElementById('graph').clientWidth;\n        const height = 600;Â·\n        const simulation = d3.forceSimulation(data.nodes)\n          .force('link', d3.forceLink(data.links).id(d => d.id))\n          .force('charge', d3.forceManyBody().strength(-100))\n          .force('center', d3.forceCenter(width / 2, height / 2));Â·\n        const svg = d3.select('#graph')\n          .append('svg')\n          .attr('width', width)\n          .attr('height', height);Â·\n        const link = svg.append('g')\n          .selectAll('line')\n          .data(data.links)\n          .join('line')\n          .attr('stroke', 'var(--border)')\n          .attr('stroke-width', 1);Â·\n        const node = svg.append('g')\n          .selectAll('circle')\n          .data(data.nodes)\n          .join('circle')\n          .attr('r', 5)\n          .attr('fill', 'var(--link)')\n          .call(drag(simulation));Â·\n        node.append('title')\n          .text(d => d.attributes.name || d.attributes.title || d.id);Â·\n        simulation.on('tick', () => {\n          link\n            .attr('x1', d => d.source.x)\n            .attr('y1', d => d.source.y)\n            .attr('x2', d => d.target.x)\n            .attr('y2', d => d.target.y);Â·\n          node\n            .attr('cx', d => d.x)\n            .attr('cy', d => d.y);\n        });Â·\n        // Entity selection functionality\n        window.selectEntityById = function(id) {\n          // Find the selected node\n          const selectedNode = data.nodes.find(function(n) { return n.id === id; });\n          if (!selectedNode) return;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Reset all nodes\n          node.attr('r', 5).attr('stroke', null);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Highlight the selected node\n          const selectedNodeElement = node.filter(function(d) { return d.id === id; })\n            .attr('r', 8)\n            .attr('stroke', 'var(--link)')\n            .attr('stroke-width', 2);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Center and zoom on the selected node\n          const scale = 2;\n          const x = width / 2 - scale * selectedNode.x;\n          const y = height / 2 - scale * selectedNode.y;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          svg.transition().duration(500)\n            .attr('transform', 'translate(' + x + ',' + y + ') scale(' + scale + ')');\n        };Â·\n        function drag(simulation) {\n          function dragstarted(event) {\n            if (!event.active) simulation.alphaTarget(0.3).restart();\n            event.subject.fx = event.subject.x;\n            event.subject.fy = event.subject.y;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          function dragged(event) {\n            event.subject.fx = event.x;\n            event.subject.fy = event.y;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          function dragended(event) {\n            if (!event.active) simulation.alphaTarget(0);\n            event.subject.fx = null;\n            event.subject.fy = null;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          return d3.drag()\n            .on('start', dragstarted)\n            .on('drag', dragged)\n            .on('end', dragended);\n        }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n        // Search functionality\n        const searchInput = document.getElementById('search-input');\n        const entityList = document.getElementById('entity-list');\n        const entityItems = entityList.querySelectorAll('.entity-item');Â·\n        searchInput.addEventListener('input', function() {\n          const searchTerm = this.value.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          entityItems.forEach(item => {\n            const id = item.getAttribute('data-id').toLowerCase();\n            const type = item.getAttribute('data-type').toLowerCase();\n            const text = item.textContent.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n            if (id.includes(searchTerm) || type.includes(searchTerm) || text.includes(searchTerm)) {\n              item.style.display = '';\n            } else {\n              item.style.display = 'none';\n            }\n          });\n        });Â·Â·Â·Â·Â·Â·Â·Â·Â·\n      </script>\n    </div>\n  </div>\n</body>\n</html>\"\n\n9. \u001b[31mHTML Website Features â€º should use title as fallback for name\u001b[0m\n   ğŸ“„ File: tests/integration/html-website-features.test.js\n   ğŸ”´ expect(received).toContain(expected) // indexOf\n\nExpected substring: \"const name = entity.attributes.name || entity.attributes.title || entity.id;\"\nReceived string:    \"<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\\\"UTF-8\\\">\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n  <title>HTML Features Test</title>Â·Â·Â·\n  <style>\n    :root {\n      --background: #ffffff;\n      --text: #000000;\n      --link: #0066cc;\n      --accent: #666666;\n      --border: #dddddd;\n    }\n    body {\n      font-family: system-ui, -apple-system, sans-serif;\n      margin: 0;\n      padding: 0;\n      background: var(--background);\n      color: var(--text);\n    }\n    .container {\n      display: grid;\n      grid-template-columns: 300px 1fr;\n      height: 100vh;\n    }\n    .sidebar {\n      padding: 20px;\n      border-right: 1px solid var(--border);\n      overflow-y: auto;\n    }\n    .main {\n      padding: 20px;\n      overflow-y: auto;\n    }\n    h1, h2, h3, h4 {\n      color: var(--text);\n      margin-top: 0;\n    }\n    a {\n      color: var(--link);\n      text-decoration: none;\n    }\n    a:hover {\n      text-decoration: underline;\n    }\n    .entity-list {\n      list-style: none;\n      padding: 0;\n    }\n    .entity-item {\n      padding: 8px;\n      margin: 4px 0;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n    }\n    .entity-type {\n      color: var(--accent);\n      font-size: 0.9em;\n    }\n    #graph {\n      width: 100%;\n      height: 600px;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n    }\n    .search-box {\n      margin-bottom: 20px;\n    }\n    #search-input {\n      width: 100%;\n      padding: 8px;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n      background: var(--background);\n      color: var(--text);\n    }\n  </style>\n  <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\n</head>\n<body>\n  <div class=\\\"container\\\">\n    <div class=\\\"sidebar\\\">\n      <h2>HTML Features Test</h2>\n      <p>Testing HTML website features</p>Â·Â·Â·Â·Â·Â·Â·\n      <div class=\\\"search-box\\\">\n        <input type=\\\"text\\\" id=\\\"search-input\\\" placeholder=\\\"Search entities...\\\" />\n      </div>Â·Â·Â·Â·Â·Â·Â·\n      <h3>Entities</h3>\n      <ul class=\\\"entity-list\\\" id=\\\"entity-list\\\">Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity1\\\" data-type=\\\"person\\\">\n            <a href=\\\"entity1.html\\\">\n              John Doe\n            </a>\n            <div class=\\\"entity-type\\\">person</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity2\\\" data-type=\\\"project\\\">\n            <a href=\\\"entity2.html\\\">\n              Project Alpha\n            </a>\n            <div class=\\\"entity-type\\\">project</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity3\\\" data-type=\\\"resource\\\">\n            <a href=\\\"entity3.html\\\">\n              entity3\n            </a>\n            <div class=\\\"entity-type\\\">resource</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n      </ul>\n    </div>\n    <div class=\\\"main\\\">\n      <div id=\\\"graph\\\"></div>\n      <script>\n        // Graph visualization code\n        const data = {\n          nodes: [\n            {\n                \\\"id\\\": \\\"entity1\\\",\n                \\\"name\\\": \\\"John Doe\\\",\n                \\\"type\\\": \\\"person\\\",\n                \\\"attributes\\\": {\\\"name\\\":\\\"John Doe\\\",\\\"age\\\":30,\\\"email\\\":\\\"john@example.com\\\"}\n              },\n            {\n                \\\"id\\\": \\\"entity2\\\",\n                \\\"name\\\": \\\"Project Alpha\\\",\n                \\\"type\\\": \\\"project\\\",\n                \\\"attributes\\\": {\\\"title\\\":\\\"Project Alpha\\\",\\\"status\\\":\\\"Active\\\",\\\"priority\\\":\\\"High\\\"}\n              },\n            {\n                \\\"id\\\": \\\"entity3\\\",\n                \\\"name\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"resource\\\",\n                \\\"attributes\\\": {\\\"type\\\":\\\"Document\\\",\\\"url\\\":\\\"https://example.com/doc\\\"}\n              }\n          ],\n          links: [\n            {\n                \\\"source\\\": \\\"entity1\\\",\n                \\\"target\\\": \\\"entity2\\\",\n                \\\"type\\\": \\\"manages\\\"\n              },\n            {\n                \\\"source\\\": \\\"entity1\\\",\n                \\\"target\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"created\\\"\n              },\n            {\n                \\\"source\\\": \\\"entity2\\\",\n                \\\"target\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"contains\\\"\n              }\n          ]\n        };Â·\n        const width = document.getElementById('graph').clientWidth;\n        const height = 600;Â·\n        const simulation = d3.forceSimulation(data.nodes)\n          .force('link', d3.forceLink(data.links).id(d => d.id))\n          .force('charge', d3.forceManyBody().strength(-100))\n          .force('center', d3.forceCenter(width / 2, height / 2));Â·\n        const svg = d3.select('#graph')\n          .append('svg')\n          .attr('width', width)\n          .attr('height', height);Â·\n        const link = svg.append('g')\n          .selectAll('line')\n          .data(data.links)\n          .join('line')\n          .attr('stroke', 'var(--border)')\n          .attr('stroke-width', 1);Â·\n        const node = svg.append('g')\n          .selectAll('circle')\n          .data(data.nodes)\n          .join('circle')\n          .attr('r', 5)\n          .attr('fill', 'var(--link)')\n          .call(drag(simulation));Â·\n        node.append('title')\n          .text(d => d.attributes.name || d.attributes.title || d.id);Â·\n        simulation.on('tick', () => {\n          link\n            .attr('x1', d => d.source.x)\n            .attr('y1', d => d.source.y)\n            .attr('x2', d => d.target.x)\n            .attr('y2', d => d.target.y);Â·\n          node\n            .attr('cx', d => d.x)\n            .attr('cy', d => d.y);\n        });Â·\n        // Entity selection functionality\n        window.selectEntityById = function(id) {\n          // Find the selected node\n          const selectedNode = data.nodes.find(function(n) { return n.id === id; });\n          if (!selectedNode) return;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Reset all nodes\n          node.attr('r', 5).attr('stroke', null);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Highlight the selected node\n          const selectedNodeElement = node.filter(function(d) { return d.id === id; })\n            .attr('r', 8)\n            .attr('stroke', 'var(--link)')\n            .attr('stroke-width', 2);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Center and zoom on the selected node\n          const scale = 2;\n          const x = width / 2 - scale * selectedNode.x;\n          const y = height / 2 - scale * selectedNode.y;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          svg.transition().duration(500)\n            .attr('transform', 'translate(' + x + ',' + y + ') scale(' + scale + ')');\n        };Â·\n        function drag(simulation) {\n          function dragstarted(event) {\n            if (!event.active) simulation.alphaTarget(0.3).restart();\n            event.subject.fx = event.subject.x;\n            event.subject.fy = event.subject.y;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          function dragged(event) {\n            event.subject.fx = event.x;\n            event.subject.fy = event.y;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          function dragended(event) {\n            if (!event.active) simulation.alphaTarget(0);\n            event.subject.fx = null;\n            event.subject.fy = null;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          return d3.drag()\n            .on('start', dragstarted)\n            .on('drag', dragged)\n            .on('end', dragended);\n        }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n        // Search functionality\n        const searchInput = document.getElementById('search-input');\n        const entityList = document.getElementById('entity-list');\n        const entityItems = entityList.querySelectorAll('.entity-item');Â·\n        searchInput.addEventListener('input', function() {\n          const searchTerm = this.value.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          entityItems.forEach(item => {\n            const id = item.getAttribute('data-id').toLowerCase();\n            const type = item.getAttribute('data-type').toLowerCase();\n            const text = item.textContent.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n            if (id.includes(searchTerm) || type.includes(searchTerm) || text.includes(searchTerm)) {\n              item.style.display = '';\n            } else {\n              item.style.display = 'none';\n            }\n          });\n        });Â·Â·Â·Â·Â·Â·Â·Â·Â·\n      </script>\n    </div>\n  </div>\n</body>\n</html>\"\n\n10. \u001b[31mHTML Website Features â€º should have improved entity detail pages with sections\u001b[0m\n   ğŸ“„ File: tests/integration/html-website-features.test.js\n   ğŸ”´ expect(received).toContain(expected) // indexOf\n\nExpected substring: \"<div class=\\\"entity-section\\\">\"\nReceived string:    \"<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\\\"UTF-8\\\">\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n  <title>John Doe - HTML Features Test</title>Â·Â·Â·\n  <style>\n    :root {\n      --background: #ffffff;\n      --text: #000000;\n      --link: #0066cc;\n      --accent: #666666;\n      --border: #dddddd;\n    }\n    body {\n      font-family: system-ui, -apple-system, sans-serif;\n      margin: 0;\n      padding: 20px;\n      background: var(--background);\n      color: var(--text);\n      max-width: 800px;\n      margin: 0 auto;\n    }\n    h1, h2, h3, h4 {\n      color: var(--text);\n    }\n    a {\n      color: var(--link);\n      text-decoration: none;\n    }\n    a:hover {\n      text-decoration: underline;\n    }\n    .back-link {\n      display: inline-block;\n      margin-bottom: 20px;\n    }\n    .entity-type {\n      color: var(--accent);\n      font-size: 0.9em;\n      margin-bottom: 20px;\n    }\n    .attributes {\n      border: 1px solid var(--border);\n      border-radius: 4px;\n      padding: 16px;\n      margin-bottom: 20px;\n    }\n    .attribute-row {\n      display: grid;\n      grid-template-columns: 200px 1fr;\n      padding: 8px 0;\n      border-bottom: 1px solid var(--border);\n    }\n    .attribute-row:last-child {\n      border-bottom: none;\n    }\n    .attribute-key {\n      color: var(--accent);\n    }\n    .relationship-list {\n      list-style: none;\n      padding: 0;\n    }\n    .relationship-item {\n      padding: 8px;\n      margin: 4px 0;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n    }\n    .relationship-attributes {\n      margin-top: 4px;\n      font-size: 0.9em;\n      color: var(--accent);\n    }\n  </style>\n</head>\n<body>\n  <a href=\\\"index.html\\\" class=\\\"back-link\\\">â† Back to Graph</a>\n  <h1>John Doe</h1>\n  <div class=\\\"entity-type\\\">person</div>Â·Â·Â·\n  <h3>Attributes</h3>\n  <div class=\\\"attributes\\\">Â·Â·Â·Â·Â·\n      <div class=\\\"attribute-row\\\">\n        <div class=\\\"attribute-key\\\">name</div>\n        <div class=\\\"attribute-value\\\">John Doe</div>\n      </div>Â·Â·Â·Â·Â·\n      <div class=\\\"attribute-row\\\">\n        <div class=\\\"attribute-key\\\">age</div>\n        <div class=\\\"attribute-value\\\">30</div>\n      </div>Â·Â·Â·Â·Â·\n      <div class=\\\"attribute-row\\\">\n        <div class=\\\"attribute-key\\\">email</div>\n        <div class=\\\"attribute-value\\\">john@example.com</div>\n      </div>Â·Â·Â·Â·Â·\n  </div>Â·\n  <h3>Relationships</h3>\n  <h4>Outgoing</h4><ul class=\\\"relationship-list\\\"><li class=\\\"relationship-item\\\">\n        <strong>manages</strong> â†’ <a href=\\\"entity2.html\\\">Project Alpha</a><div class=\\\"relationship-attributes\\\"><small><strong>role:</strong> Project Manager</small> <small><strong>since:</strong> 2023-01-15</small> </div></li><li class=\\\"relationship-item\\\">\n        <strong>created</strong> â†’ <a href=\\\"entity3.html\\\">entity3</a><div class=\\\"relationship-attributes\\\"><small><strong>date:</strong> 2023-02-10</small> </div></li></ul>\n</body>\n</html>\"\n\n11. \u001b[31mHTML Website Features â€º should generate different themes correctly\u001b[0m\n   ğŸ“„ File: tests/integration/html-website-features.test.js\n   ğŸ”´ expect(received).toContain(expected) // indexOf\n\nExpected substring: \"--text-color: #e8eaed\"\nReceived string:    \"<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\\\"UTF-8\\\">\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n  <title>Dark Theme Test</title>Â·Â·Â·\n  <style>\n    :root {\n      --background: #202124;\n      --text: #e8eaed;\n      --link: #4a9eff;\n      --accent: #666666;\n      --border: #333333;\n    }\n    body {\n      font-family: system-ui, -apple-system, sans-serif;\n      margin: 0;\n      padding: 0;\n      background: var(--background);\n      color: var(--text);\n    }\n    .container {\n      display: grid;\n      grid-template-columns: 300px 1fr;\n      height: 100vh;\n    }\n    .sidebar {\n      padding: 20px;\n      border-right: 1px solid var(--border);\n      overflow-y: auto;\n    }\n    .main {\n      padding: 20px;\n      overflow-y: auto;\n    }\n    h1, h2, h3, h4 {\n      color: var(--text);\n      margin-top: 0;\n    }\n    a {\n      color: var(--link);\n      text-decoration: none;\n    }\n    a:hover {\n      text-decoration: underline;\n    }\n    .entity-list {\n      list-style: none;\n      padding: 0;\n    }\n    .entity-item {\n      padding: 8px;\n      margin: 4px 0;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n    }\n    .entity-type {\n      color: var(--accent);\n      font-size: 0.9em;\n    }\n    #graph {\n      width: 100%;\n      height: 600px;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n    }\n    .search-box {\n      margin-bottom: 20px;\n    }\n    #search-input {\n      width: 100%;\n      padding: 8px;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n      background: var(--background);\n      color: var(--text);\n    }\n  </style>\n  <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\n</head>\n<body>\n  <div class=\\\"container\\\">\n    <div class=\\\"sidebar\\\">\n      <h2>Dark Theme Test</h2>\n      <p>Testing dark theme</p>Â·Â·Â·Â·Â·Â·Â·\n      <div class=\\\"search-box\\\">\n        <input type=\\\"text\\\" id=\\\"search-input\\\" placeholder=\\\"Search entities...\\\" />\n      </div>Â·Â·Â·Â·Â·Â·Â·\n      <h3>Entities</h3>\n      <ul class=\\\"entity-list\\\" id=\\\"entity-list\\\">Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity1\\\" data-type=\\\"person\\\">\n            <a href=\\\"entity1.html\\\">\n              John Doe\n            </a>\n            <div class=\\\"entity-type\\\">person</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity2\\\" data-type=\\\"project\\\">\n            <a href=\\\"entity2.html\\\">\n              Project Alpha\n            </a>\n            <div class=\\\"entity-type\\\">project</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity3\\\" data-type=\\\"resource\\\">\n            <a href=\\\"entity3.html\\\">\n              entity3\n            </a>\n            <div class=\\\"entity-type\\\">resource</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n      </ul>\n    </div>\n    <div class=\\\"main\\\">\n      <div id=\\\"graph\\\"></div>\n      <script>\n        // Graph visualization code\n        const data = {\n          nodes: [\n            {\n                \\\"id\\\": \\\"entity1\\\",\n                \\\"name\\\": \\\"John Doe\\\",\n                \\\"type\\\": \\\"person\\\",\n                \\\"attributes\\\": {\\\"name\\\":\\\"John Doe\\\",\\\"age\\\":30,\\\"email\\\":\\\"john@example.com\\\"}\n              },\n            {\n                \\\"id\\\": \\\"entity2\\\",\n                \\\"name\\\": \\\"Project Alpha\\\",\n                \\\"type\\\": \\\"project\\\",\n                \\\"attributes\\\": {\\\"title\\\":\\\"Project Alpha\\\",\\\"status\\\":\\\"Active\\\",\\\"priority\\\":\\\"High\\\"}\n              },\n            {\n                \\\"id\\\": \\\"entity3\\\",\n                \\\"name\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"resource\\\",\n                \\\"attributes\\\": {\\\"type\\\":\\\"Document\\\",\\\"url\\\":\\\"https://example.com/doc\\\"}\n              }\n          ],\n          links: [\n            {\n                \\\"source\\\": \\\"entity1\\\",\n                \\\"target\\\": \\\"entity2\\\",\n                \\\"type\\\": \\\"manages\\\"\n              },\n            {\n                \\\"source\\\": \\\"entity1\\\",\n                \\\"target\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"created\\\"\n              },\n            {\n                \\\"source\\\": \\\"entity2\\\",\n                \\\"target\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"contains\\\"\n              }\n          ]\n        };Â·\n        const width = document.getElementById('graph').clientWidth;\n        const height = 600;Â·\n        const simulation = d3.forceSimulation(data.nodes)\n          .force('link', d3.forceLink(data.links).id(d => d.id))\n          .force('charge', d3.forceManyBody().strength(-100))\n          .force('center', d3.forceCenter(width / 2, height / 2));Â·\n        const svg = d3.select('#graph')\n          .append('svg')\n          .attr('width', width)\n          .attr('height', height);Â·\n        const link = svg.append('g')\n          .selectAll('line')\n          .data(data.links)\n          .join('line')\n          .attr('stroke', 'var(--border)')\n          .attr('stroke-width', 1);Â·\n        const node = svg.append('g')\n          .selectAll('circle')\n          .data(data.nodes)\n          .join('circle')\n          .attr('r', 5)\n          .attr('fill', 'var(--link)')\n          .call(drag(simulation));Â·\n        node.append('title')\n          .text(d => d.attributes.name || d.attributes.title || d.id);Â·\n        simulation.on('tick', () => {\n          link\n            .attr('x1', d => d.source.x)\n            .attr('y1', d => d.source.y)\n            .attr('x2', d => d.target.x)\n            .attr('y2', d => d.target.y);Â·\n          node\n            .attr('cx', d => d.x)\n            .attr('cy', d => d.y);\n        });Â·\n        // Entity selection functionality\n        window.selectEntityById = function(id) {\n          // Find the selected node\n          const selectedNode = data.nodes.find(function(n) { return n.id === id; });\n          if (!selectedNode) return;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Reset all nodes\n          node.attr('r', 5).attr('stroke', null);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Highlight the selected node\n          const selectedNodeElement = node.filter(function(d) { return d.id === id; })\n            .attr('r', 8)\n            .attr('stroke', 'var(--link)')\n            .attr('stroke-width', 2);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Center and zoom on the selected node\n          const scale = 2;\n          const x = width / 2 - scale * selectedNode.x;\n          const y = height / 2 - scale * selectedNode.y;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          svg.transition().duration(500)\n            .attr('transform', 'translate(' + x + ',' + y + ') scale(' + scale + ')');\n        };Â·\n        function drag(simulation) {\n          function dragstarted(event) {\n            if (!event.active) simulation.alphaTarget(0.3).restart();\n            event.subject.fx = event.subject.x;\n            event.subject.fy = event.subject.y;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          function dragged(event) {\n            event.subject.fx = event.x;\n            event.subject.fy = event.y;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          function dragended(event) {\n            if (!event.active) simulation.alphaTarget(0);\n            event.subject.fx = null;\n            event.subject.fy = null;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          return d3.drag()\n            .on('start', dragstarted)\n            .on('drag', dragged)\n            .on('end', dragended);\n        }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n        // Search functionality\n        const searchInput = document.getElementById('search-input');\n        const entityList = document.getElementById('entity-list');\n        const entityItems = entityList.querySelectorAll('.entity-item');Â·\n        searchInput.addEventListener('input', function() {\n          const searchTerm = this.value.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          entityItems.forEach(item => {\n            const id = item.getAttribute('data-id').toLowerCase();\n            const type = item.getAttribute('data-type').toLowerCase();\n            const text = item.textContent.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n            if (id.includes(searchTerm) || type.includes(searchTerm) || text.includes(searchTerm)) {\n              item.style.display = '';\n            } else {\n              item.style.display = 'none';\n            }\n          });\n        });Â·Â·Â·Â·Â·Â·Â·Â·Â·\n      </script>\n    </div>\n  </div>\n</body>\n</html>\"\n\n12. \u001b[31mHTML Website Features â€º should support interactive relationship navigation\u001b[0m\n   ğŸ“„ File: tests/integration/html-website-features.test.js\n   ğŸ”´ expect(received).toContain(expected) // indexOf\n\nExpected substring: \"window.selectEntityById = (id) => {\"\nReceived string:    \"<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\\\"UTF-8\\\">\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n  <title>HTML Features Test</title>Â·Â·Â·\n  <style>\n    :root {\n      --background: #ffffff;\n      --text: #000000;\n      --link: #0066cc;\n      --accent: #666666;\n      --border: #dddddd;\n    }\n    body {\n      font-family: system-ui, -apple-system, sans-serif;\n      margin: 0;\n      padding: 0;\n      background: var(--background);\n      color: var(--text);\n    }\n    .container {\n      display: grid;\n      grid-template-columns: 300px 1fr;\n      height: 100vh;\n    }\n    .sidebar {\n      padding: 20px;\n      border-right: 1px solid var(--border);\n      overflow-y: auto;\n    }\n    .main {\n      padding: 20px;\n      overflow-y: auto;\n    }\n    h1, h2, h3, h4 {\n      color: var(--text);\n      margin-top: 0;\n    }\n    a {\n      color: var(--link);\n      text-decoration: none;\n    }\n    a:hover {\n      text-decoration: underline;\n    }\n    .entity-list {\n      list-style: none;\n      padding: 0;\n    }\n    .entity-item {\n      padding: 8px;\n      margin: 4px 0;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n    }\n    .entity-type {\n      color: var(--accent);\n      font-size: 0.9em;\n    }\n    #graph {\n      width: 100%;\n      height: 600px;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n    }\n    .search-box {\n      margin-bottom: 20px;\n    }\n    #search-input {\n      width: 100%;\n      padding: 8px;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n      background: var(--background);\n      color: var(--text);\n    }\n  </style>\n  <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\n</head>\n<body>\n  <div class=\\\"container\\\">\n    <div class=\\\"sidebar\\\">\n      <h2>HTML Features Test</h2>\n      <p>Testing HTML website features</p>Â·Â·Â·Â·Â·Â·Â·\n      <div class=\\\"search-box\\\">\n        <input type=\\\"text\\\" id=\\\"search-input\\\" placeholder=\\\"Search entities...\\\" />\n      </div>Â·Â·Â·Â·Â·Â·Â·\n      <h3>Entities</h3>\n      <ul class=\\\"entity-list\\\" id=\\\"entity-list\\\">Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity1\\\" data-type=\\\"person\\\">\n            <a href=\\\"entity1.html\\\">\n              John Doe\n            </a>\n            <div class=\\\"entity-type\\\">person</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity2\\\" data-type=\\\"project\\\">\n            <a href=\\\"entity2.html\\\">\n              Project Alpha\n            </a>\n            <div class=\\\"entity-type\\\">project</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          <li class=\\\"entity-item\\\" data-id=\\\"entity3\\\" data-type=\\\"resource\\\">\n            <a href=\\\"entity3.html\\\">\n              entity3\n            </a>\n            <div class=\\\"entity-type\\\">resource</div>\n          </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n      </ul>\n    </div>\n    <div class=\\\"main\\\">\n      <div id=\\\"graph\\\"></div>\n      <script>\n        // Graph visualization code\n        const data = {\n          nodes: [\n            {\n                \\\"id\\\": \\\"entity1\\\",\n                \\\"name\\\": \\\"John Doe\\\",\n                \\\"type\\\": \\\"person\\\",\n                \\\"attributes\\\": {\\\"name\\\":\\\"John Doe\\\",\\\"age\\\":30,\\\"email\\\":\\\"john@example.com\\\"}\n              },\n            {\n                \\\"id\\\": \\\"entity2\\\",\n                \\\"name\\\": \\\"Project Alpha\\\",\n                \\\"type\\\": \\\"project\\\",\n                \\\"attributes\\\": {\\\"title\\\":\\\"Project Alpha\\\",\\\"status\\\":\\\"Active\\\",\\\"priority\\\":\\\"High\\\"}\n              },\n            {\n                \\\"id\\\": \\\"entity3\\\",\n                \\\"name\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"resource\\\",\n                \\\"attributes\\\": {\\\"type\\\":\\\"Document\\\",\\\"url\\\":\\\"https://example.com/doc\\\"}\n              }\n          ],\n          links: [\n            {\n                \\\"source\\\": \\\"entity1\\\",\n                \\\"target\\\": \\\"entity2\\\",\n                \\\"type\\\": \\\"manages\\\"\n              },\n            {\n                \\\"source\\\": \\\"entity1\\\",\n                \\\"target\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"created\\\"\n              },\n            {\n                \\\"source\\\": \\\"entity2\\\",\n                \\\"target\\\": \\\"entity3\\\",\n                \\\"type\\\": \\\"contains\\\"\n              }\n          ]\n        };Â·\n        const width = document.getElementById('graph').clientWidth;\n        const height = 600;Â·\n        const simulation = d3.forceSimulation(data.nodes)\n          .force('link', d3.forceLink(data.links).id(d => d.id))\n          .force('charge', d3.forceManyBody().strength(-100))\n          .force('center', d3.forceCenter(width / 2, height / 2));Â·\n        const svg = d3.select('#graph')\n          .append('svg')\n          .attr('width', width)\n          .attr('height', height);Â·\n        const link = svg.append('g')\n          .selectAll('line')\n          .data(data.links)\n          .join('line')\n          .attr('stroke', 'var(--border)')\n          .attr('stroke-width', 1);Â·\n        const node = svg.append('g')\n          .selectAll('circle')\n          .data(data.nodes)\n          .join('circle')\n          .attr('r', 5)\n          .attr('fill', 'var(--link)')\n          .call(drag(simulation));Â·\n        node.append('title')\n          .text(d => d.attributes.name || d.attributes.title || d.id);Â·\n        simulation.on('tick', () => {\n          link\n            .attr('x1', d => d.source.x)\n            .attr('y1', d => d.source.y)\n            .attr('x2', d => d.target.x)\n            .attr('y2', d => d.target.y);Â·\n          node\n            .attr('cx', d => d.x)\n            .attr('cy', d => d.y);\n        });Â·\n        // Entity selection functionality\n        window.selectEntityById = function(id) {\n          // Find the selected node\n          const selectedNode = data.nodes.find(function(n) { return n.id === id; });\n          if (!selectedNode) return;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Reset all nodes\n          node.attr('r', 5).attr('stroke', null);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Highlight the selected node\n          const selectedNodeElement = node.filter(function(d) { return d.id === id; })\n            .attr('r', 8)\n            .attr('stroke', 'var(--link)')\n            .attr('stroke-width', 2);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          // Center and zoom on the selected node\n          const scale = 2;\n          const x = width / 2 - scale * selectedNode.x;\n          const y = height / 2 - scale * selectedNode.y;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          svg.transition().duration(500)\n            .attr('transform', 'translate(' + x + ',' + y + ') scale(' + scale + ')');\n        };Â·\n        function drag(simulation) {\n          function dragstarted(event) {\n            if (!event.active) simulation.alphaTarget(0.3).restart();\n            event.subject.fx = event.subject.x;\n            event.subject.fy = event.subject.y;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          function dragged(event) {\n            event.subject.fx = event.x;\n            event.subject.fy = event.y;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          function dragended(event) {\n            if (!event.active) simulation.alphaTarget(0);\n            event.subject.fx = null;\n            event.subject.fy = null;\n          }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          return d3.drag()\n            .on('start', dragstarted)\n            .on('drag', dragged)\n            .on('end', dragended);\n        }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n        // Search functionality\n        const searchInput = document.getElementById('search-input');\n        const entityList = document.getElementById('entity-list');\n        const entityItems = entityList.querySelectorAll('.entity-item');Â·\n        searchInput.addEventListener('input', function() {\n          const searchTerm = this.value.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          entityItems.forEach(item => {\n            const id = item.getAttribute('data-id').toLowerCase();\n            const type = item.getAttribute('data-type').toLowerCase();\n            const text = item.textContent.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n            if (id.includes(searchTerm) || type.includes(searchTerm) || text.includes(searchTerm)) {\n              item.style.display = '';\n            } else {\n              item.style.display = 'none';\n            }\n          });\n        });Â·Â·Â·Â·Â·Â·Â·Â·Â·\n      </script>\n    </div>\n  </div>\n</body>\n</html>\"\n\n13. \u001b[31mExport Formats Integration â€º JSON Export â€º should export JSON with vectors if requested\u001b[0m\n   ğŸ“„ File: tests/integration/export-formats.test.js\n   ğŸ”´ expect(received).toHaveProperty(path)\n\nExpected path: \"vector\"\nReceived path: []\n\nReceived value: {\"attributes\": {\"height\": \"15-50 feet\", \"lifespan\": \"150-200 years\", \"name\": \"Saguaro Cactus\", \"scientificName\": \"Carnegiea gigantea\", \"type\": \"plant\"}, \"id\": \"saguaro\", \"metadata\": {\"created\": \"2025-03-05T00:58:29.963Z\", \"modified\": \"2025-03-05T00:58:29.963Z\"}, \"type\": \"organism\"}\n\n14. \u001b[31mExport Formats Integration â€º Full Blob Export â€º should export a compressed full blob\u001b[0m\n   ğŸ“„ File: tests/integration/export-formats.test.js\n   ğŸ”´ expect(received).toBe(expected) // Object.is equality\n\nExpected: \"string\"\nReceived: \"object\"\n\n15. \u001b[31mExport Formats Integration â€º KIF Format Export â€º should include meta-knowledge, functions, and rules when requested\u001b[0m\n   ğŸ“„ File: tests/integration/export-formats.test.js\n   ğŸ”´ expect(received).toContain(expected) // indexOf\n\nExpected substring: \"(= (creationDate UltraLinkExport)\"\nReceived string:    \";; UltraLink Knowledge Interchange Format (KIF) Export\n;; Generated: 2025-03-05T00:58:29.982Z\n;; Entities and their attributes\n(instance saguaro Organism)\n(name saguaro \\\"Saguaro Cactus\\\")\n(scientificName saguaro \\\"Carnegiea gigantea\\\")\n(type saguaro \\\"plant\\\")\n(height saguaro \\\"15-50 feet\\\")\n(lifespan saguaro \\\"150-200 years\\\")Â·\n(instance kangaroo-rat Organism)\n(name kangaroo-rat \\\"Kangaroo Rat\\\")\n(scientificName kangaroo-rat \\\"Dipodomys\\\")\n(type kangaroo-rat \\\"mammal\\\")\n(weight kangaroo-rat \\\"100-150g\\\")\n(nocturnal kangaroo-rat \\\"true\\\")Â·\n(instance aridity Environmental_factor)\n(name aridity \\\"Aridity\\\")\n(description aridity \\\"Extremely dry conditions with minimal rainfall\\\")\n(annualRainfall aridity \\\"3-15 inches\\\")Â·\n;; Relationships\n(adapts_to saguaro aridity)\n(adapts_to kangaroo-rat aridity)Â·\n;; Meta-knowledge\n(= (entityCount UltraLinkExport) 3)\n(= (relationshipCount UltraLinkExport) 2)\n(= (exportDate UltraLinkExport) \\\"2025-03-05T00:58:29.982Z\\\")\n(= (exportVersion UltraLinkExport) \\\"1.0\\\")Â·\n;; Functions\n(deffunction relationshipCount (?kb)\n  :documentation \\\"Returns the total number of relationships in a knowledge base\\\"\n  :return-type Integer)Â·\n(deffunction entityCount (?kb)\n  :documentation \\\"Returns the total number of entities in a knowledge base\\\"\n  :return-type Integer)Â·\n;; Rules\n(defrule temporal-ordering\n  :documentation \\\"Rule for temporal ordering of events\\\"\n  (and (instance ?e1 Event)\n       (instance ?e2 Event)\n       (date ?e1 ?d1)\n       (date ?e2 ?d2)\n       (evaluate ?before (string< ?d1 ?d2)))\n  (before ?e1 ?e2))\n\"\n\n16. \u001b[31mExport Formats Integration â€º KIF Format Export â€º should export complex entities with vectors and temporal data in KIF format\u001b[0m\n   ğŸ“„ File: tests/integration/export-formats.test.js\n   ğŸ”´ expect(received).toContain(expected) // indexOf\n\nExpected substring: \"(= (strength-mentions document concept1) 0.85)\"\nReceived string:    \";; UltraLink Knowledge Interchange Format (KIF) Export\n;; Generated: 2025-03-05T00:58:29.983Z\n;; Entities and their attributes\n(instance concept1 Concept)\n(name concept1 \\\"Democracy\\\")\n(definition concept1 \\\"Government by the people\\\")Â·\n(instance concept2 Concept)\n(name concept2 \\\"Freedom\\\")\n(definition concept2 \\\"The power of self-determination\\\")Â·\n(instance document Historical_document)\n(name document \\\"Declaration of Independence\\\")\n(date document \\\"1776-07-04\\\")\n(author document \\\"Thomas Jefferson\\\")Â·\n;; Relationships\n(mentions document concept1)\n(mentions document concept2)\n(related_to concept1 concept2)Â·\n;; Meta-knowledge\n(= (entityCount UltraLinkExport) 3)\n(= (relationshipCount UltraLinkExport) 3)\n(= (exportDate UltraLinkExport) \\\"2025-03-05T00:58:29.983Z\\\")\n(= (exportVersion UltraLinkExport) \\\"1.0\\\")Â·\n;; Functions\n(deffunction relationshipCount (?kb)\n  :documentation \\\"Returns the total number of relationships in a knowledge base\\\"\n  :return-type Integer)Â·\n(deffunction entityCount (?kb)\n  :documentation \\\"Returns the total number of entities in a knowledge base\\\"\n  :return-type Integer)Â·\n;; Rules\n(defrule temporal-ordering\n  :documentation \\\"Rule for temporal ordering of events\\\"\n  (and (instance ?e1 Event)\n       (instance ?e2 Event)\n       (date ?e1 ?d1)\n       (date ?e2 ?d2)\n       (evaluate ?before (string< ?d1 ?d2)))\n  (before ?e1 ?e2))\n\"\n\nâ— \u001b[33mCheck the failed tests and fix the issues before proceeding.\u001b[0m\n\n",
      "error": "Command failed: npx jest tests/integration\nFAIL tests/integration/parser-store.test.js\n  UltraLinkParser and EntityStore Integration\n    Basic Parsing and Entity Creation\n      âœ• should parse Obsidian-style links and create corresponding entities (2 ms)\n      âœ• should handle documents with duplicate links\n    Custom Parser Integration\n      âœ• should use custom parsers to extract links in different formats (1 ms)\n    Multi-Document Integration\n      âœ• should correctly maintain entity relationships across multiple documents\n    Error Handling\n      âœ• should gracefully handle malformed input (1 ms)\n\n  â— UltraLinkParser and EntityStore Integration â€º Basic Parsing and Entity Creation â€º should parse Obsidian-style links and create corresponding entities\n\n    TypeError: EntityStore is not a constructor\n\n      13 |   \n      14 |   beforeEach(() => {\n    > 15 |     store = new EntityStore();\n         |             ^\n      16 |     parser = new UltraLinkParser(store);\n      17 |   });\n      18 |   \n\n      at Object.<anonymous> (tests/integration/parser-store.test.js:15:13)\n\n  â— UltraLinkParser and EntityStore Integration â€º Basic Parsing and Entity Creation â€º should parse Obsidian-style links and create corresponding entities\n\n    TypeError: Cannot read properties of undefined (reading 'clear')\n\n      19 |   afterEach(async () => {\n      20 |     // Cleanup after each test\n    > 21 |     await store.clear();\n         |                 ^\n      22 |   });\n      23 |   \n      24 |   describe('Basic Parsing and Entity Creation', () => {\n\n      at Object.clear (tests/integration/parser-store.test.js:21:17)\n\n  â— UltraLinkParser and EntityStore Integration â€º Basic Parsing and Entity Creation â€º should handle documents with duplicate links\n\n    TypeError: EntityStore is not a constructor\n\n      13 |   \n      14 |   beforeEach(() => {\n    > 15 |     store = new EntityStore();\n         |             ^\n      16 |     parser = new UltraLinkParser(store);\n      17 |   });\n      18 |   \n\n      at Object.<anonymous> (tests/integration/parser-store.test.js:15:13)\n\n  â— UltraLinkParser and EntityStore Integration â€º Basic Parsing and Entity Creation â€º should handle documents with duplicate links\n\n    TypeError: Cannot read properties of undefined (reading 'clear')\n\n      19 |   afterEach(async () => {\n      20 |     // Cleanup after each test\n    > 21 |     await store.clear();\n         |                 ^\n      22 |   });\n      23 |   \n      24 |   describe('Basic Parsing and Entity Creation', () => {\n\n      at Object.clear (tests/integration/parser-store.test.js:21:17)\n\n  â— UltraLinkParser and EntityStore Integration â€º Custom Parser Integration â€º should use custom parsers to extract links in different formats\n\n    TypeError: EntityStore is not a constructor\n\n      13 |   \n      14 |   beforeEach(() => {\n    > 15 |     store = new EntityStore();\n         |             ^\n      16 |     parser = new UltraLinkParser(store);\n      17 |   });\n      18 |   \n\n      at Object.<anonymous> (tests/integration/parser-store.test.js:15:13)\n\n  â— UltraLinkParser and EntityStore Integration â€º Custom Parser Integration â€º should use custom parsers to extract links in different formats\n\n    TypeError: Cannot read properties of undefined (reading 'clear')\n\n      19 |   afterEach(async () => {\n      20 |     // Cleanup after each test\n    > 21 |     await store.clear();\n         |                 ^\n      22 |   });\n      23 |   \n      24 |   describe('Basic Parsing and Entity Creation', () => {\n\n      at Object.clear (tests/integration/parser-store.test.js:21:17)\n\n  â— UltraLinkParser and EntityStore Integration â€º Multi-Document Integration â€º should correctly maintain entity relationships across multiple documents\n\n    TypeError: EntityStore is not a constructor\n\n      13 |   \n      14 |   beforeEach(() => {\n    > 15 |     store = new EntityStore();\n         |             ^\n      16 |     parser = new UltraLinkParser(store);\n      17 |   });\n      18 |   \n\n      at Object.<anonymous> (tests/integration/parser-store.test.js:15:13)\n\n  â— UltraLinkParser and EntityStore Integration â€º Multi-Document Integration â€º should correctly maintain entity relationships across multiple documents\n\n    TypeError: Cannot read properties of undefined (reading 'clear')\n\n      19 |   afterEach(async () => {\n      20 |     // Cleanup after each test\n    > 21 |     await store.clear();\n         |                 ^\n      22 |   });\n      23 |   \n      24 |   describe('Basic Parsing and Entity Creation', () => {\n\n      at Object.clear (tests/integration/parser-store.test.js:21:17)\n\n  â— UltraLinkParser and EntityStore Integration â€º Error Handling â€º should gracefully handle malformed input\n\n    TypeError: EntityStore is not a constructor\n\n      13 |   \n      14 |   beforeEach(() => {\n    > 15 |     store = new EntityStore();\n         |             ^\n      16 |     parser = new UltraLinkParser(store);\n      17 |   });\n      18 |   \n\n      at Object.<anonymous> (tests/integration/parser-store.test.js:15:13)\n\n  â— UltraLinkParser and EntityStore Integration â€º Error Handling â€º should gracefully handle malformed input\n\n    TypeError: Cannot read properties of undefined (reading 'clear')\n\n      19 |   afterEach(async () => {\n      20 |     // Cleanup after each test\n    > 21 |     await store.clear();\n         |                 ^\n      22 |   });\n      23 |   \n      24 |   describe('Basic Parsing and Entity Creation', () => {\n\n      at Object.clear (tests/integration/parser-store.test.js:21:17)\n\nPASS tests/integration/research-team.test.js\n  Research Team Integration Tests\n    âœ“ should correctly identify all researchers (4 ms)\n    âœ“ should find entities by attribute value (1 ms)\n    âœ“ should identify all project leads\n    âœ“ should find all mentorship relationships (3 ms)\n    âœ“ should identify equipment usage (1 ms)\n    âœ“ should find all publications by author (1 ms)\n    âœ“ should identify knowledge area expertise\n    âœ“ should find project focus areas (1 ms)\n    âœ“ should create valid subset of people data\n    âœ“ should create valid subset of project data\n    âœ“ should create valid subset of publication data (1 ms)\n    âœ“ should handle invalid subset type (11 ms)\n\nPASS tests/integration/research-team-export.test.js\n  Research Team Export Tests\n    âœ“ HTML Website Export (14 ms)\n    âœ“ GraphML Export (2 ms)\n    âœ“ Obsidian Export (4 ms)\n    âœ“ CSV Export (2 ms)\n    âœ“ Full Blob Export (2 ms)\n\nFAIL tests/integration/html-website-features.test.js\n  HTML Website Features\n    âœ• should include zoom and pan controls (8 ms)\n    âœ• should include clear filters button (6 ms)\n    âœ• should use responsive SVG with viewBox (2 ms)\n    âœ• should use title as fallback for name (1 ms)\n    âœ• should have improved entity detail pages with sections\n    âœ• should generate different themes correctly\n    âœ• should support interactive relationship navigation (1 ms)\n    âœ“ should properly handle entities without name or title\n    âœ“ should include relationship attributes in details view (1 ms)\n\n  â— HTML Website Features â€º should include zoom and pan controls\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"<div class=\\\"zoom-controls\\\">\"\n    Received string:    \"<!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset=\\\"UTF-8\\\">\n      <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n      <title>HTML Features Test</title>Â·Â·Â·\n      <style>\n        :root {\n          --background: #ffffff;\n          --text: #000000;\n          --link: #0066cc;\n          --accent: #666666;\n          --border: #dddddd;\n        }\n        body {\n          font-family: system-ui, -apple-system, sans-serif;\n          margin: 0;\n          padding: 0;\n          background: var(--background);\n          color: var(--text);\n        }\n        .container {\n          display: grid;\n          grid-template-columns: 300px 1fr;\n          height: 100vh;\n        }\n        .sidebar {\n          padding: 20px;\n          border-right: 1px solid var(--border);\n          overflow-y: auto;\n        }\n        .main {\n          padding: 20px;\n          overflow-y: auto;\n        }\n        h1, h2, h3, h4 {\n          color: var(--text);\n          margin-top: 0;\n        }\n        a {\n          color: var(--link);\n          text-decoration: none;\n        }\n        a:hover {\n          text-decoration: underline;\n        }\n        .entity-list {\n          list-style: none;\n          padding: 0;\n        }\n        .entity-item {\n          padding: 8px;\n          margin: 4px 0;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n        }\n        .entity-type {\n          color: var(--accent);\n          font-size: 0.9em;\n        }\n        #graph {\n          width: 100%;\n          height: 600px;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n        }\n        .search-box {\n          margin-bottom: 20px;\n        }\n        #search-input {\n          width: 100%;\n          padding: 8px;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n          background: var(--background);\n          color: var(--text);\n        }\n      </style>\n      <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\n    </head>\n    <body>\n      <div class=\\\"container\\\">\n        <div class=\\\"sidebar\\\">\n          <h2>HTML Features Test</h2>\n          <p>Testing HTML website features</p>Â·Â·Â·Â·Â·Â·Â·\n          <div class=\\\"search-box\\\">\n            <input type=\\\"text\\\" id=\\\"search-input\\\" placeholder=\\\"Search entities...\\\" />\n          </div>Â·Â·Â·Â·Â·Â·Â·\n          <h3>Entities</h3>\n          <ul class=\\\"entity-list\\\" id=\\\"entity-list\\\">Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity1\\\" data-type=\\\"person\\\">\n                <a href=\\\"entity1.html\\\">\n                  John Doe\n                </a>\n                <div class=\\\"entity-type\\\">person</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity2\\\" data-type=\\\"project\\\">\n                <a href=\\\"entity2.html\\\">\n                  Project Alpha\n                </a>\n                <div class=\\\"entity-type\\\">project</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity3\\\" data-type=\\\"resource\\\">\n                <a href=\\\"entity3.html\\\">\n                  entity3\n                </a>\n                <div class=\\\"entity-type\\\">resource</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          </ul>\n        </div>\n        <div class=\\\"main\\\">\n          <div id=\\\"graph\\\"></div>\n          <script>\n            // Graph visualization code\n            const data = {\n              nodes: [\n                {\n                    \\\"id\\\": \\\"entity1\\\",\n                    \\\"name\\\": \\\"John Doe\\\",\n                    \\\"type\\\": \\\"person\\\",\n                    \\\"attributes\\\": {\\\"name\\\":\\\"John Doe\\\",\\\"age\\\":30,\\\"email\\\":\\\"john@example.com\\\"}\n                  },\n                {\n                    \\\"id\\\": \\\"entity2\\\",\n                    \\\"name\\\": \\\"Project Alpha\\\",\n                    \\\"type\\\": \\\"project\\\",\n                    \\\"attributes\\\": {\\\"title\\\":\\\"Project Alpha\\\",\\\"status\\\":\\\"Active\\\",\\\"priority\\\":\\\"High\\\"}\n                  },\n                {\n                    \\\"id\\\": \\\"entity3\\\",\n                    \\\"name\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"resource\\\",\n                    \\\"attributes\\\": {\\\"type\\\":\\\"Document\\\",\\\"url\\\":\\\"https://example.com/doc\\\"}\n                  }\n              ],\n              links: [\n                {\n                    \\\"source\\\": \\\"entity1\\\",\n                    \\\"target\\\": \\\"entity2\\\",\n                    \\\"type\\\": \\\"manages\\\"\n                  },\n                {\n                    \\\"source\\\": \\\"entity1\\\",\n                    \\\"target\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"created\\\"\n                  },\n                {\n                    \\\"source\\\": \\\"entity2\\\",\n                    \\\"target\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"contains\\\"\n                  }\n              ]\n            };Â·\n            const width = document.getElementById('graph').clientWidth;\n            const height = 600;Â·\n            const simulation = d3.forceSimulation(data.nodes)\n              .force('link', d3.forceLink(data.links).id(d => d.id))\n              .force('charge', d3.forceManyBody().strength(-100))\n              .force('center', d3.forceCenter(width / 2, height / 2));Â·\n            const svg = d3.select('#graph')\n              .append('svg')\n              .attr('width', width)\n              .attr('height', height);Â·\n            const link = svg.append('g')\n              .selectAll('line')\n              .data(data.links)\n              .join('line')\n              .attr('stroke', 'var(--border)')\n              .attr('stroke-width', 1);Â·\n            const node = svg.append('g')\n              .selectAll('circle')\n              .data(data.nodes)\n              .join('circle')\n              .attr('r', 5)\n              .attr('fill', 'var(--link)')\n              .call(drag(simulation));Â·\n            node.append('title')\n              .text(d => d.attributes.name || d.attributes.title || d.id);Â·\n            simulation.on('tick', () => {\n              link\n                .attr('x1', d => d.source.x)\n                .attr('y1', d => d.source.y)\n                .attr('x2', d => d.target.x)\n                .attr('y2', d => d.target.y);Â·\n              node\n                .attr('cx', d => d.x)\n                .attr('cy', d => d.y);\n            });Â·\n            // Entity selection functionality\n            window.selectEntityById = function(id) {\n              // Find the selected node\n              const selectedNode = data.nodes.find(function(n) { return n.id === id; });\n              if (!selectedNode) return;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Reset all nodes\n              node.attr('r', 5).attr('stroke', null);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Highlight the selected node\n              const selectedNodeElement = node.filter(function(d) { return d.id === id; })\n                .attr('r', 8)\n                .attr('stroke', 'var(--link)')\n                .attr('stroke-width', 2);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Center and zoom on the selected node\n              const scale = 2;\n              const x = width / 2 - scale * selectedNode.x;\n              const y = height / 2 - scale * selectedNode.y;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              svg.transition().duration(500)\n                .attr('transform', 'translate(' + x + ',' + y + ') scale(' + scale + ')');\n            };Â·\n            function drag(simulation) {\n              function dragstarted(event) {\n                if (!event.active) simulation.alphaTarget(0.3).restart();\n                event.subject.fx = event.subject.x;\n                event.subject.fy = event.subject.y;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              function dragged(event) {\n                event.subject.fx = event.x;\n                event.subject.fy = event.y;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              function dragended(event) {\n                if (!event.active) simulation.alphaTarget(0);\n                event.subject.fx = null;\n                event.subject.fy = null;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              return d3.drag()\n                .on('start', dragstarted)\n                .on('drag', dragged)\n                .on('end', dragended);\n            }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n            // Search functionality\n            const searchInput = document.getElementById('search-input');\n            const entityList = document.getElementById('entity-list');\n            const entityItems = entityList.querySelectorAll('.entity-item');Â·\n            searchInput.addEventListener('input', function() {\n              const searchTerm = this.value.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              entityItems.forEach(item => {\n                const id = item.getAttribute('data-id').toLowerCase();\n                const type = item.getAttribute('data-type').toLowerCase();\n                const text = item.textContent.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n                if (id.includes(searchTerm) || type.includes(searchTerm) || text.includes(searchTerm)) {\n                  item.style.display = '';\n                } else {\n                  item.style.display = 'none';\n                }\n              });\n            });Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          </script>\n        </div>\n      </div>\n    </body>\n    </html>\"\n\n      74 |   test('should include zoom and pan controls', () => {\n      75 |     // Check for zoom controls in index.html\n    > 76 |     expect(htmlFiles['index.html']).toContain('<div class=\"zoom-controls\">');\n         |                                     ^\n      77 |     expect(htmlFiles['index.html']).toContain('<button class=\"zoom-btn\" id=\"zoom-in\">+</button>');\n      78 |     expect(htmlFiles['index.html']).toContain('<button class=\"zoom-btn\" id=\"zoom-reset\">âŸ³</button>');\n      79 |     expect(htmlFiles['index.html']).toContain('<button class=\"zoom-btn\" id=\"zoom-out\">âˆ’</button>');\n\n      at Object.toContain (tests/integration/html-website-features.test.js:76:37)\n\n  â— HTML Website Features â€º should include clear filters button\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"<button class=\\\"btn\\\" id=\\\"clear-filters\\\">Clear Filters</button>\"\n    Received string:    \"<!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset=\\\"UTF-8\\\">\n      <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n      <title>HTML Features Test</title>Â·Â·Â·\n      <style>\n        :root {\n          --background: #ffffff;\n          --text: #000000;\n          --link: #0066cc;\n          --accent: #666666;\n          --border: #dddddd;\n        }\n        body {\n          font-family: system-ui, -apple-system, sans-serif;\n          margin: 0;\n          padding: 0;\n          background: var(--background);\n          color: var(--text);\n        }\n        .container {\n          display: grid;\n          grid-template-columns: 300px 1fr;\n          height: 100vh;\n        }\n        .sidebar {\n          padding: 20px;\n          border-right: 1px solid var(--border);\n          overflow-y: auto;\n        }\n        .main {\n          padding: 20px;\n          overflow-y: auto;\n        }\n        h1, h2, h3, h4 {\n          color: var(--text);\n          margin-top: 0;\n        }\n        a {\n          color: var(--link);\n          text-decoration: none;\n        }\n        a:hover {\n          text-decoration: underline;\n        }\n        .entity-list {\n          list-style: none;\n          padding: 0;\n        }\n        .entity-item {\n          padding: 8px;\n          margin: 4px 0;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n        }\n        .entity-type {\n          color: var(--accent);\n          font-size: 0.9em;\n        }\n        #graph {\n          width: 100%;\n          height: 600px;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n        }\n        .search-box {\n          margin-bottom: 20px;\n        }\n        #search-input {\n          width: 100%;\n          padding: 8px;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n          background: var(--background);\n          color: var(--text);\n        }\n      </style>\n      <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\n    </head>\n    <body>\n      <div class=\\\"container\\\">\n        <div class=\\\"sidebar\\\">\n          <h2>HTML Features Test</h2>\n          <p>Testing HTML website features</p>Â·Â·Â·Â·Â·Â·Â·\n          <div class=\\\"search-box\\\">\n            <input type=\\\"text\\\" id=\\\"search-input\\\" placeholder=\\\"Search entities...\\\" />\n          </div>Â·Â·Â·Â·Â·Â·Â·\n          <h3>Entities</h3>\n          <ul class=\\\"entity-list\\\" id=\\\"entity-list\\\">Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity1\\\" data-type=\\\"person\\\">\n                <a href=\\\"entity1.html\\\">\n                  John Doe\n                </a>\n                <div class=\\\"entity-type\\\">person</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity2\\\" data-type=\\\"project\\\">\n                <a href=\\\"entity2.html\\\">\n                  Project Alpha\n                </a>\n                <div class=\\\"entity-type\\\">project</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity3\\\" data-type=\\\"resource\\\">\n                <a href=\\\"entity3.html\\\">\n                  entity3\n                </a>\n                <div class=\\\"entity-type\\\">resource</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          </ul>\n        </div>\n        <div class=\\\"main\\\">\n          <div id=\\\"graph\\\"></div>\n          <script>\n            // Graph visualization code\n            const data = {\n              nodes: [\n                {\n                    \\\"id\\\": \\\"entity1\\\",\n                    \\\"name\\\": \\\"John Doe\\\",\n                    \\\"type\\\": \\\"person\\\",\n                    \\\"attributes\\\": {\\\"name\\\":\\\"John Doe\\\",\\\"age\\\":30,\\\"email\\\":\\\"john@example.com\\\"}\n                  },\n                {\n                    \\\"id\\\": \\\"entity2\\\",\n                    \\\"name\\\": \\\"Project Alpha\\\",\n                    \\\"type\\\": \\\"project\\\",\n                    \\\"attributes\\\": {\\\"title\\\":\\\"Project Alpha\\\",\\\"status\\\":\\\"Active\\\",\\\"priority\\\":\\\"High\\\"}\n                  },\n                {\n                    \\\"id\\\": \\\"entity3\\\",\n                    \\\"name\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"resource\\\",\n                    \\\"attributes\\\": {\\\"type\\\":\\\"Document\\\",\\\"url\\\":\\\"https://example.com/doc\\\"}\n                  }\n              ],\n              links: [\n                {\n                    \\\"source\\\": \\\"entity1\\\",\n                    \\\"target\\\": \\\"entity2\\\",\n                    \\\"type\\\": \\\"manages\\\"\n                  },\n                {\n                    \\\"source\\\": \\\"entity1\\\",\n                    \\\"target\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"created\\\"\n                  },\n                {\n                    \\\"source\\\": \\\"entity2\\\",\n                    \\\"target\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"contains\\\"\n                  }\n              ]\n            };Â·\n            const width = document.getElementById('graph').clientWidth;\n            const height = 600;Â·\n            const simulation = d3.forceSimulation(data.nodes)\n              .force('link', d3.forceLink(data.links).id(d => d.id))\n              .force('charge', d3.forceManyBody().strength(-100))\n              .force('center', d3.forceCenter(width / 2, height / 2));Â·\n            const svg = d3.select('#graph')\n              .append('svg')\n              .attr('width', width)\n              .attr('height', height);Â·\n            const link = svg.append('g')\n              .selectAll('line')\n              .data(data.links)\n              .join('line')\n              .attr('stroke', 'var(--border)')\n              .attr('stroke-width', 1);Â·\n            const node = svg.append('g')\n              .selectAll('circle')\n              .data(data.nodes)\n              .join('circle')\n              .attr('r', 5)\n              .attr('fill', 'var(--link)')\n              .call(drag(simulation));Â·\n            node.append('title')\n              .text(d => d.attributes.name || d.attributes.title || d.id);Â·\n            simulation.on('tick', () => {\n              link\n                .attr('x1', d => d.source.x)\n                .attr('y1', d => d.source.y)\n                .attr('x2', d => d.target.x)\n                .attr('y2', d => d.target.y);Â·\n              node\n                .attr('cx', d => d.x)\n                .attr('cy', d => d.y);\n            });Â·\n            // Entity selection functionality\n            window.selectEntityById = function(id) {\n              // Find the selected node\n              const selectedNode = data.nodes.find(function(n) { return n.id === id; });\n              if (!selectedNode) return;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Reset all nodes\n              node.attr('r', 5).attr('stroke', null);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Highlight the selected node\n              const selectedNodeElement = node.filter(function(d) { return d.id === id; })\n                .attr('r', 8)\n                .attr('stroke', 'var(--link)')\n                .attr('stroke-width', 2);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Center and zoom on the selected node\n              const scale = 2;\n              const x = width / 2 - scale * selectedNode.x;\n              const y = height / 2 - scale * selectedNode.y;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              svg.transition().duration(500)\n                .attr('transform', 'translate(' + x + ',' + y + ') scale(' + scale + ')');\n            };Â·\n            function drag(simulation) {\n              function dragstarted(event) {\n                if (!event.active) simulation.alphaTarget(0.3).restart();\n                event.subject.fx = event.subject.x;\n                event.subject.fy = event.subject.y;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              function dragged(event) {\n                event.subject.fx = event.x;\n                event.subject.fy = event.y;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              function dragended(event) {\n                if (!event.active) simulation.alphaTarget(0);\n                event.subject.fx = null;\n                event.subject.fy = null;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              return d3.drag()\n                .on('start', dragstarted)\n                .on('drag', dragged)\n                .on('end', dragended);\n            }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n            // Search functionality\n            const searchInput = document.getElementById('search-input');\n            const entityList = document.getElementById('entity-list');\n            const entityItems = entityList.querySelectorAll('.entity-item');Â·\n            searchInput.addEventListener('input', function() {\n              const searchTerm = this.value.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              entityItems.forEach(item => {\n                const id = item.getAttribute('data-id').toLowerCase();\n                const type = item.getAttribute('data-type').toLowerCase();\n                const text = item.textContent.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n                if (id.includes(searchTerm) || type.includes(searchTerm) || text.includes(searchTerm)) {\n                  item.style.display = '';\n                } else {\n                  item.style.display = 'none';\n                }\n              });\n            });Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          </script>\n        </div>\n      </div>\n    </body>\n    </html>\"\n\n      92 |   test('should include clear filters button', () => {\n      93 |     // Check for clear filters button\n    > 94 |     expect(htmlFiles['index.html']).toContain('<button class=\"btn\" id=\"clear-filters\">Clear Filters</button>');\n         |                                     ^\n      95 |     \n      96 |     // Check for event handler\n      97 |     expect(htmlFiles['index.html']).toContain('clearFiltersBtn.addEventListener');\n\n      at Object.toContain (tests/integration/html-website-features.test.js:94:37)\n\n  â— HTML Website Features â€º should use responsive SVG with viewBox\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \".attr('width', '100%')\"\n    Received string:    \"<!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset=\\\"UTF-8\\\">\n      <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n      <title>HTML Features Test</title>Â·Â·Â·\n      <style>\n        :root {\n          --background: #ffffff;\n          --text: #000000;\n          --link: #0066cc;\n          --accent: #666666;\n          --border: #dddddd;\n        }\n        body {\n          font-family: system-ui, -apple-system, sans-serif;\n          margin: 0;\n          padding: 0;\n          background: var(--background);\n          color: var(--text);\n        }\n        .container {\n          display: grid;\n          grid-template-columns: 300px 1fr;\n          height: 100vh;\n        }\n        .sidebar {\n          padding: 20px;\n          border-right: 1px solid var(--border);\n          overflow-y: auto;\n        }\n        .main {\n          padding: 20px;\n          overflow-y: auto;\n        }\n        h1, h2, h3, h4 {\n          color: var(--text);\n          margin-top: 0;\n        }\n        a {\n          color: var(--link);\n          text-decoration: none;\n        }\n        a:hover {\n          text-decoration: underline;\n        }\n        .entity-list {\n          list-style: none;\n          padding: 0;\n        }\n        .entity-item {\n          padding: 8px;\n          margin: 4px 0;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n        }\n        .entity-type {\n          color: var(--accent);\n          font-size: 0.9em;\n        }\n        #graph {\n          width: 100%;\n          height: 600px;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n        }\n        .search-box {\n          margin-bottom: 20px;\n        }\n        #search-input {\n          width: 100%;\n          padding: 8px;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n          background: var(--background);\n          color: var(--text);\n        }\n      </style>\n      <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\n    </head>\n    <body>\n      <div class=\\\"container\\\">\n        <div class=\\\"sidebar\\\">\n          <h2>HTML Features Test</h2>\n          <p>Testing HTML website features</p>Â·Â·Â·Â·Â·Â·Â·\n          <div class=\\\"search-box\\\">\n            <input type=\\\"text\\\" id=\\\"search-input\\\" placeholder=\\\"Search entities...\\\" />\n          </div>Â·Â·Â·Â·Â·Â·Â·\n          <h3>Entities</h3>\n          <ul class=\\\"entity-list\\\" id=\\\"entity-list\\\">Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity1\\\" data-type=\\\"person\\\">\n                <a href=\\\"entity1.html\\\">\n                  John Doe\n                </a>\n                <div class=\\\"entity-type\\\">person</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity2\\\" data-type=\\\"project\\\">\n                <a href=\\\"entity2.html\\\">\n                  Project Alpha\n                </a>\n                <div class=\\\"entity-type\\\">project</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity3\\\" data-type=\\\"resource\\\">\n                <a href=\\\"entity3.html\\\">\n                  entity3\n                </a>\n                <div class=\\\"entity-type\\\">resource</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          </ul>\n        </div>\n        <div class=\\\"main\\\">\n          <div id=\\\"graph\\\"></div>\n          <script>\n            // Graph visualization code\n            const data = {\n              nodes: [\n                {\n                    \\\"id\\\": \\\"entity1\\\",\n                    \\\"name\\\": \\\"John Doe\\\",\n                    \\\"type\\\": \\\"person\\\",\n                    \\\"attributes\\\": {\\\"name\\\":\\\"John Doe\\\",\\\"age\\\":30,\\\"email\\\":\\\"john@example.com\\\"}\n                  },\n                {\n                    \\\"id\\\": \\\"entity2\\\",\n                    \\\"name\\\": \\\"Project Alpha\\\",\n                    \\\"type\\\": \\\"project\\\",\n                    \\\"attributes\\\": {\\\"title\\\":\\\"Project Alpha\\\",\\\"status\\\":\\\"Active\\\",\\\"priority\\\":\\\"High\\\"}\n                  },\n                {\n                    \\\"id\\\": \\\"entity3\\\",\n                    \\\"name\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"resource\\\",\n                    \\\"attributes\\\": {\\\"type\\\":\\\"Document\\\",\\\"url\\\":\\\"https://example.com/doc\\\"}\n                  }\n              ],\n              links: [\n                {\n                    \\\"source\\\": \\\"entity1\\\",\n                    \\\"target\\\": \\\"entity2\\\",\n                    \\\"type\\\": \\\"manages\\\"\n                  },\n                {\n                    \\\"source\\\": \\\"entity1\\\",\n                    \\\"target\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"created\\\"\n                  },\n                {\n                    \\\"source\\\": \\\"entity2\\\",\n                    \\\"target\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"contains\\\"\n                  }\n              ]\n            };Â·\n            const width = document.getElementById('graph').clientWidth;\n            const height = 600;Â·\n            const simulation = d3.forceSimulation(data.nodes)\n              .force('link', d3.forceLink(data.links).id(d => d.id))\n              .force('charge', d3.forceManyBody().strength(-100))\n              .force('center', d3.forceCenter(width / 2, height / 2));Â·\n            const svg = d3.select('#graph')\n              .append('svg')\n              .attr('width', width)\n              .attr('height', height);Â·\n            const link = svg.append('g')\n              .selectAll('line')\n              .data(data.links)\n              .join('line')\n              .attr('stroke', 'var(--border)')\n              .attr('stroke-width', 1);Â·\n            const node = svg.append('g')\n              .selectAll('circle')\n              .data(data.nodes)\n              .join('circle')\n              .attr('r', 5)\n              .attr('fill', 'var(--link)')\n              .call(drag(simulation));Â·\n            node.append('title')\n              .text(d => d.attributes.name || d.attributes.title || d.id);Â·\n            simulation.on('tick', () => {\n              link\n                .attr('x1', d => d.source.x)\n                .attr('y1', d => d.source.y)\n                .attr('x2', d => d.target.x)\n                .attr('y2', d => d.target.y);Â·\n              node\n                .attr('cx', d => d.x)\n                .attr('cy', d => d.y);\n            });Â·\n            // Entity selection functionality\n            window.selectEntityById = function(id) {\n              // Find the selected node\n              const selectedNode = data.nodes.find(function(n) { return n.id === id; });\n              if (!selectedNode) return;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Reset all nodes\n              node.attr('r', 5).attr('stroke', null);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Highlight the selected node\n              const selectedNodeElement = node.filter(function(d) { return d.id === id; })\n                .attr('r', 8)\n                .attr('stroke', 'var(--link)')\n                .attr('stroke-width', 2);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Center and zoom on the selected node\n              const scale = 2;\n              const x = width / 2 - scale * selectedNode.x;\n              const y = height / 2 - scale * selectedNode.y;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              svg.transition().duration(500)\n                .attr('transform', 'translate(' + x + ',' + y + ') scale(' + scale + ')');\n            };Â·\n            function drag(simulation) {\n              function dragstarted(event) {\n                if (!event.active) simulation.alphaTarget(0.3).restart();\n                event.subject.fx = event.subject.x;\n                event.subject.fy = event.subject.y;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              function dragged(event) {\n                event.subject.fx = event.x;\n                event.subject.fy = event.y;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              function dragended(event) {\n                if (!event.active) simulation.alphaTarget(0);\n                event.subject.fx = null;\n                event.subject.fy = null;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              return d3.drag()\n                .on('start', dragstarted)\n                .on('drag', dragged)\n                .on('end', dragended);\n            }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n            // Search functionality\n            const searchInput = document.getElementById('search-input');\n            const entityList = document.getElementById('entity-list');\n            const entityItems = entityList.querySelectorAll('.entity-item');Â·\n            searchInput.addEventListener('input', function() {\n              const searchTerm = this.value.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              entityItems.forEach(item => {\n                const id = item.getAttribute('data-id').toLowerCase();\n                const type = item.getAttribute('data-type').toLowerCase();\n                const text = item.textContent.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n                if (id.includes(searchTerm) || type.includes(searchTerm) || text.includes(searchTerm)) {\n                  item.style.display = '';\n                } else {\n                  item.style.display = 'none';\n                }\n              });\n            });Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          </script>\n        </div>\n      </div>\n    </body>\n    </html>\"\n\n      102 |   test('should use responsive SVG with viewBox', () => {\n      103 |     // Check for responsive SVG attributes\n    > 104 |     expect(htmlFiles['index.html']).toContain('.attr(\\'width\\', \\'100%\\')');\n          |                                     ^\n      105 |     expect(htmlFiles['index.html']).toContain('.attr(\\'height\\', \\'100%\\')');\n      106 |     expect(htmlFiles['index.html']).toContain('.attr(\\'viewBox\\', [0, 0, width, height])');\n      107 |     expect(htmlFiles['index.html']).toContain('.attr(\\'preserveAspectRatio\\', \\'xMidYMid meet\\')');\n\n      at Object.toContain (tests/integration/html-website-features.test.js:104:37)\n\n  â— HTML Website Features â€º should use title as fallback for name\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"const name = entity.attributes.name || entity.attributes.title || entity.id;\"\n    Received string:    \"<!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset=\\\"UTF-8\\\">\n      <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n      <title>HTML Features Test</title>Â·Â·Â·\n      <style>\n        :root {\n          --background: #ffffff;\n          --text: #000000;\n          --link: #0066cc;\n          --accent: #666666;\n          --border: #dddddd;\n        }\n        body {\n          font-family: system-ui, -apple-system, sans-serif;\n          margin: 0;\n          padding: 0;\n          background: var(--background);\n          color: var(--text);\n        }\n        .container {\n          display: grid;\n          grid-template-columns: 300px 1fr;\n          height: 100vh;\n        }\n        .sidebar {\n          padding: 20px;\n          border-right: 1px solid var(--border);\n          overflow-y: auto;\n        }\n        .main {\n          padding: 20px;\n          overflow-y: auto;\n        }\n        h1, h2, h3, h4 {\n          color: var(--text);\n          margin-top: 0;\n        }\n        a {\n          color: var(--link);\n          text-decoration: none;\n        }\n        a:hover {\n          text-decoration: underline;\n        }\n        .entity-list {\n          list-style: none;\n          padding: 0;\n        }\n        .entity-item {\n          padding: 8px;\n          margin: 4px 0;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n        }\n        .entity-type {\n          color: var(--accent);\n          font-size: 0.9em;\n        }\n        #graph {\n          width: 100%;\n          height: 600px;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n        }\n        .search-box {\n          margin-bottom: 20px;\n        }\n        #search-input {\n          width: 100%;\n          padding: 8px;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n          background: var(--background);\n          color: var(--text);\n        }\n      </style>\n      <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\n    </head>\n    <body>\n      <div class=\\\"container\\\">\n        <div class=\\\"sidebar\\\">\n          <h2>HTML Features Test</h2>\n          <p>Testing HTML website features</p>Â·Â·Â·Â·Â·Â·Â·\n          <div class=\\\"search-box\\\">\n            <input type=\\\"text\\\" id=\\\"search-input\\\" placeholder=\\\"Search entities...\\\" />\n          </div>Â·Â·Â·Â·Â·Â·Â·\n          <h3>Entities</h3>\n          <ul class=\\\"entity-list\\\" id=\\\"entity-list\\\">Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity1\\\" data-type=\\\"person\\\">\n                <a href=\\\"entity1.html\\\">\n                  John Doe\n                </a>\n                <div class=\\\"entity-type\\\">person</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity2\\\" data-type=\\\"project\\\">\n                <a href=\\\"entity2.html\\\">\n                  Project Alpha\n                </a>\n                <div class=\\\"entity-type\\\">project</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity3\\\" data-type=\\\"resource\\\">\n                <a href=\\\"entity3.html\\\">\n                  entity3\n                </a>\n                <div class=\\\"entity-type\\\">resource</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          </ul>\n        </div>\n        <div class=\\\"main\\\">\n          <div id=\\\"graph\\\"></div>\n          <script>\n            // Graph visualization code\n            const data = {\n              nodes: [\n                {\n                    \\\"id\\\": \\\"entity1\\\",\n                    \\\"name\\\": \\\"John Doe\\\",\n                    \\\"type\\\": \\\"person\\\",\n                    \\\"attributes\\\": {\\\"name\\\":\\\"John Doe\\\",\\\"age\\\":30,\\\"email\\\":\\\"john@example.com\\\"}\n                  },\n                {\n                    \\\"id\\\": \\\"entity2\\\",\n                    \\\"name\\\": \\\"Project Alpha\\\",\n                    \\\"type\\\": \\\"project\\\",\n                    \\\"attributes\\\": {\\\"title\\\":\\\"Project Alpha\\\",\\\"status\\\":\\\"Active\\\",\\\"priority\\\":\\\"High\\\"}\n                  },\n                {\n                    \\\"id\\\": \\\"entity3\\\",\n                    \\\"name\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"resource\\\",\n                    \\\"attributes\\\": {\\\"type\\\":\\\"Document\\\",\\\"url\\\":\\\"https://example.com/doc\\\"}\n                  }\n              ],\n              links: [\n                {\n                    \\\"source\\\": \\\"entity1\\\",\n                    \\\"target\\\": \\\"entity2\\\",\n                    \\\"type\\\": \\\"manages\\\"\n                  },\n                {\n                    \\\"source\\\": \\\"entity1\\\",\n                    \\\"target\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"created\\\"\n                  },\n                {\n                    \\\"source\\\": \\\"entity2\\\",\n                    \\\"target\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"contains\\\"\n                  }\n              ]\n            };Â·\n            const width = document.getElementById('graph').clientWidth;\n            const height = 600;Â·\n            const simulation = d3.forceSimulation(data.nodes)\n              .force('link', d3.forceLink(data.links).id(d => d.id))\n              .force('charge', d3.forceManyBody().strength(-100))\n              .force('center', d3.forceCenter(width / 2, height / 2));Â·\n            const svg = d3.select('#graph')\n              .append('svg')\n              .attr('width', width)\n              .attr('height', height);Â·\n            const link = svg.append('g')\n              .selectAll('line')\n              .data(data.links)\n              .join('line')\n              .attr('stroke', 'var(--border)')\n              .attr('stroke-width', 1);Â·\n            const node = svg.append('g')\n              .selectAll('circle')\n              .data(data.nodes)\n              .join('circle')\n              .attr('r', 5)\n              .attr('fill', 'var(--link)')\n              .call(drag(simulation));Â·\n            node.append('title')\n              .text(d => d.attributes.name || d.attributes.title || d.id);Â·\n            simulation.on('tick', () => {\n              link\n                .attr('x1', d => d.source.x)\n                .attr('y1', d => d.source.y)\n                .attr('x2', d => d.target.x)\n                .attr('y2', d => d.target.y);Â·\n              node\n                .attr('cx', d => d.x)\n                .attr('cy', d => d.y);\n            });Â·\n            // Entity selection functionality\n            window.selectEntityById = function(id) {\n              // Find the selected node\n              const selectedNode = data.nodes.find(function(n) { return n.id === id; });\n              if (!selectedNode) return;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Reset all nodes\n              node.attr('r', 5).attr('stroke', null);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Highlight the selected node\n              const selectedNodeElement = node.filter(function(d) { return d.id === id; })\n                .attr('r', 8)\n                .attr('stroke', 'var(--link)')\n                .attr('stroke-width', 2);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Center and zoom on the selected node\n              const scale = 2;\n              const x = width / 2 - scale * selectedNode.x;\n              const y = height / 2 - scale * selectedNode.y;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              svg.transition().duration(500)\n                .attr('transform', 'translate(' + x + ',' + y + ') scale(' + scale + ')');\n            };Â·\n            function drag(simulation) {\n              function dragstarted(event) {\n                if (!event.active) simulation.alphaTarget(0.3).restart();\n                event.subject.fx = event.subject.x;\n                event.subject.fy = event.subject.y;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              function dragged(event) {\n                event.subject.fx = event.x;\n                event.subject.fy = event.y;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              function dragended(event) {\n                if (!event.active) simulation.alphaTarget(0);\n                event.subject.fx = null;\n                event.subject.fy = null;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              return d3.drag()\n                .on('start', dragstarted)\n                .on('drag', dragged)\n                .on('end', dragended);\n            }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n            // Search functionality\n            const searchInput = document.getElementById('search-input');\n            const entityList = document.getElementById('entity-list');\n            const entityItems = entityList.querySelectorAll('.entity-item');Â·\n            searchInput.addEventListener('input', function() {\n              const searchTerm = this.value.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              entityItems.forEach(item => {\n                const id = item.getAttribute('data-id').toLowerCase();\n                const type = item.getAttribute('data-type').toLowerCase();\n                const text = item.textContent.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n                if (id.includes(searchTerm) || type.includes(searchTerm) || text.includes(searchTerm)) {\n                  item.style.display = '';\n                } else {\n                  item.style.display = 'none';\n                }\n              });\n            });Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          </script>\n        </div>\n      </div>\n    </body>\n    </html>\"\n\n      114 |   test('should use title as fallback for name', () => {\n      115 |     // Check index.html for title fallback in entity list rendering\n    > 116 |     expect(htmlFiles['index.html']).toContain('const name = entity.attributes.name || entity.attributes.title || entity.id;');\n          |                                     ^\n      117 |     \n      118 |     // Check entity2.html (project with title but no name)\n      119 |     expect(htmlFiles['entity2.html']).toContain('<title>Project Alpha - HTML Features Test</title>');\n\n      at Object.toContain (tests/integration/html-website-features.test.js:116:37)\n\n  â— HTML Website Features â€º should have improved entity detail pages with sections\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"<div class=\\\"entity-section\\\">\"\n    Received string:    \"<!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset=\\\"UTF-8\\\">\n      <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n      <title>John Doe - HTML Features Test</title>Â·Â·Â·\n      <style>\n        :root {\n          --background: #ffffff;\n          --text: #000000;\n          --link: #0066cc;\n          --accent: #666666;\n          --border: #dddddd;\n        }\n        body {\n          font-family: system-ui, -apple-system, sans-serif;\n          margin: 0;\n          padding: 20px;\n          background: var(--background);\n          color: var(--text);\n          max-width: 800px;\n          margin: 0 auto;\n        }\n        h1, h2, h3, h4 {\n          color: var(--text);\n        }\n        a {\n          color: var(--link);\n          text-decoration: none;\n        }\n        a:hover {\n          text-decoration: underline;\n        }\n        .back-link {\n          display: inline-block;\n          margin-bottom: 20px;\n        }\n        .entity-type {\n          color: var(--accent);\n          font-size: 0.9em;\n          margin-bottom: 20px;\n        }\n        .attributes {\n          border: 1px solid var(--border);\n          border-radius: 4px;\n          padding: 16px;\n          margin-bottom: 20px;\n        }\n        .attribute-row {\n          display: grid;\n          grid-template-columns: 200px 1fr;\n          padding: 8px 0;\n          border-bottom: 1px solid var(--border);\n        }\n        .attribute-row:last-child {\n          border-bottom: none;\n        }\n        .attribute-key {\n          color: var(--accent);\n        }\n        .relationship-list {\n          list-style: none;\n          padding: 0;\n        }\n        .relationship-item {\n          padding: 8px;\n          margin: 4px 0;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n        }\n        .relationship-attributes {\n          margin-top: 4px;\n          font-size: 0.9em;\n          color: var(--accent);\n        }\n      </style>\n    </head>\n    <body>\n      <a href=\\\"index.html\\\" class=\\\"back-link\\\">â† Back to Graph</a>\n      <h1>John Doe</h1>\n      <div class=\\\"entity-type\\\">person</div>Â·Â·Â·\n      <h3>Attributes</h3>\n      <div class=\\\"attributes\\\">Â·Â·Â·Â·Â·\n          <div class=\\\"attribute-row\\\">\n            <div class=\\\"attribute-key\\\">name</div>\n            <div class=\\\"attribute-value\\\">John Doe</div>\n          </div>Â·Â·Â·Â·Â·\n          <div class=\\\"attribute-row\\\">\n            <div class=\\\"attribute-key\\\">age</div>\n            <div class=\\\"attribute-value\\\">30</div>\n          </div>Â·Â·Â·Â·Â·\n          <div class=\\\"attribute-row\\\">\n            <div class=\\\"attribute-key\\\">email</div>\n            <div class=\\\"attribute-value\\\">john@example.com</div>\n          </div>Â·Â·Â·Â·Â·\n      </div>Â·\n      <h3>Relationships</h3>\n      <h4>Outgoing</h4><ul class=\\\"relationship-list\\\"><li class=\\\"relationship-item\\\">\n            <strong>manages</strong> â†’ <a href=\\\"entity2.html\\\">Project Alpha</a><div class=\\\"relationship-attributes\\\"><small><strong>role:</strong> Project Manager</small> <small><strong>since:</strong> 2023-01-15</small> </div></li><li class=\\\"relationship-item\\\">\n            <strong>created</strong> â†’ <a href=\\\"entity3.html\\\">entity3</a><div class=\\\"relationship-attributes\\\"><small><strong>date:</strong> 2023-02-10</small> </div></li></ul>\n    </body>\n    </html>\"\n\n      123 |   test('should have improved entity detail pages with sections', () => {\n      124 |     // Check entity1.html for entity sections\n    > 125 |     expect(htmlFiles['entity1.html']).toContain('<div class=\"entity-section\">');\n          |                                       ^\n      126 |     \n      127 |     // Check for attribute table styling\n      128 |     expect(htmlFiles['entity1.html']).toContain('class=\"attribute-table\"');\n\n      at Object.toContain (tests/integration/html-website-features.test.js:125:39)\n\n  â— HTML Website Features â€º should generate different themes correctly\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"--text-color: #e8eaed\"\n    Received string:    \"<!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset=\\\"UTF-8\\\">\n      <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n      <title>Dark Theme Test</title>Â·Â·Â·\n      <style>\n        :root {\n          --background: #202124;\n          --text: #e8eaed;\n          --link: #4a9eff;\n          --accent: #666666;\n          --border: #333333;\n        }\n        body {\n          font-family: system-ui, -apple-system, sans-serif;\n          margin: 0;\n          padding: 0;\n          background: var(--background);\n          color: var(--text);\n        }\n        .container {\n          display: grid;\n          grid-template-columns: 300px 1fr;\n          height: 100vh;\n        }\n        .sidebar {\n          padding: 20px;\n          border-right: 1px solid var(--border);\n          overflow-y: auto;\n        }\n        .main {\n          padding: 20px;\n          overflow-y: auto;\n        }\n        h1, h2, h3, h4 {\n          color: var(--text);\n          margin-top: 0;\n        }\n        a {\n          color: var(--link);\n          text-decoration: none;\n        }\n        a:hover {\n          text-decoration: underline;\n        }\n        .entity-list {\n          list-style: none;\n          padding: 0;\n        }\n        .entity-item {\n          padding: 8px;\n          margin: 4px 0;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n        }\n        .entity-type {\n          color: var(--accent);\n          font-size: 0.9em;\n        }\n        #graph {\n          width: 100%;\n          height: 600px;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n        }\n        .search-box {\n          margin-bottom: 20px;\n        }\n        #search-input {\n          width: 100%;\n          padding: 8px;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n          background: var(--background);\n          color: var(--text);\n        }\n      </style>\n      <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\n    </head>\n    <body>\n      <div class=\\\"container\\\">\n        <div class=\\\"sidebar\\\">\n          <h2>Dark Theme Test</h2>\n          <p>Testing dark theme</p>Â·Â·Â·Â·Â·Â·Â·\n          <div class=\\\"search-box\\\">\n            <input type=\\\"text\\\" id=\\\"search-input\\\" placeholder=\\\"Search entities...\\\" />\n          </div>Â·Â·Â·Â·Â·Â·Â·\n          <h3>Entities</h3>\n          <ul class=\\\"entity-list\\\" id=\\\"entity-list\\\">Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity1\\\" data-type=\\\"person\\\">\n                <a href=\\\"entity1.html\\\">\n                  John Doe\n                </a>\n                <div class=\\\"entity-type\\\">person</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity2\\\" data-type=\\\"project\\\">\n                <a href=\\\"entity2.html\\\">\n                  Project Alpha\n                </a>\n                <div class=\\\"entity-type\\\">project</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity3\\\" data-type=\\\"resource\\\">\n                <a href=\\\"entity3.html\\\">\n                  entity3\n                </a>\n                <div class=\\\"entity-type\\\">resource</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          </ul>\n        </div>\n        <div class=\\\"main\\\">\n          <div id=\\\"graph\\\"></div>\n          <script>\n            // Graph visualization code\n            const data = {\n              nodes: [\n                {\n                    \\\"id\\\": \\\"entity1\\\",\n                    \\\"name\\\": \\\"John Doe\\\",\n                    \\\"type\\\": \\\"person\\\",\n                    \\\"attributes\\\": {\\\"name\\\":\\\"John Doe\\\",\\\"age\\\":30,\\\"email\\\":\\\"john@example.com\\\"}\n                  },\n                {\n                    \\\"id\\\": \\\"entity2\\\",\n                    \\\"name\\\": \\\"Project Alpha\\\",\n                    \\\"type\\\": \\\"project\\\",\n                    \\\"attributes\\\": {\\\"title\\\":\\\"Project Alpha\\\",\\\"status\\\":\\\"Active\\\",\\\"priority\\\":\\\"High\\\"}\n                  },\n                {\n                    \\\"id\\\": \\\"entity3\\\",\n                    \\\"name\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"resource\\\",\n                    \\\"attributes\\\": {\\\"type\\\":\\\"Document\\\",\\\"url\\\":\\\"https://example.com/doc\\\"}\n                  }\n              ],\n              links: [\n                {\n                    \\\"source\\\": \\\"entity1\\\",\n                    \\\"target\\\": \\\"entity2\\\",\n                    \\\"type\\\": \\\"manages\\\"\n                  },\n                {\n                    \\\"source\\\": \\\"entity1\\\",\n                    \\\"target\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"created\\\"\n                  },\n                {\n                    \\\"source\\\": \\\"entity2\\\",\n                    \\\"target\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"contains\\\"\n                  }\n              ]\n            };Â·\n            const width = document.getElementById('graph').clientWidth;\n            const height = 600;Â·\n            const simulation = d3.forceSimulation(data.nodes)\n              .force('link', d3.forceLink(data.links).id(d => d.id))\n              .force('charge', d3.forceManyBody().strength(-100))\n              .force('center', d3.forceCenter(width / 2, height / 2));Â·\n            const svg = d3.select('#graph')\n              .append('svg')\n              .attr('width', width)\n              .attr('height', height);Â·\n            const link = svg.append('g')\n              .selectAll('line')\n              .data(data.links)\n              .join('line')\n              .attr('stroke', 'var(--border)')\n              .attr('stroke-width', 1);Â·\n            const node = svg.append('g')\n              .selectAll('circle')\n              .data(data.nodes)\n              .join('circle')\n              .attr('r', 5)\n              .attr('fill', 'var(--link)')\n              .call(drag(simulation));Â·\n            node.append('title')\n              .text(d => d.attributes.name || d.attributes.title || d.id);Â·\n            simulation.on('tick', () => {\n              link\n                .attr('x1', d => d.source.x)\n                .attr('y1', d => d.source.y)\n                .attr('x2', d => d.target.x)\n                .attr('y2', d => d.target.y);Â·\n              node\n                .attr('cx', d => d.x)\n                .attr('cy', d => d.y);\n            });Â·\n            // Entity selection functionality\n            window.selectEntityById = function(id) {\n              // Find the selected node\n              const selectedNode = data.nodes.find(function(n) { return n.id === id; });\n              if (!selectedNode) return;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Reset all nodes\n              node.attr('r', 5).attr('stroke', null);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Highlight the selected node\n              const selectedNodeElement = node.filter(function(d) { return d.id === id; })\n                .attr('r', 8)\n                .attr('stroke', 'var(--link)')\n                .attr('stroke-width', 2);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Center and zoom on the selected node\n              const scale = 2;\n              const x = width / 2 - scale * selectedNode.x;\n              const y = height / 2 - scale * selectedNode.y;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              svg.transition().duration(500)\n                .attr('transform', 'translate(' + x + ',' + y + ') scale(' + scale + ')');\n            };Â·\n            function drag(simulation) {\n              function dragstarted(event) {\n                if (!event.active) simulation.alphaTarget(0.3).restart();\n                event.subject.fx = event.subject.x;\n                event.subject.fy = event.subject.y;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              function dragged(event) {\n                event.subject.fx = event.x;\n                event.subject.fy = event.y;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              function dragended(event) {\n                if (!event.active) simulation.alphaTarget(0);\n                event.subject.fx = null;\n                event.subject.fy = null;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              return d3.drag()\n                .on('start', dragstarted)\n                .on('drag', dragged)\n                .on('end', dragended);\n            }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n            // Search functionality\n            const searchInput = document.getElementById('search-input');\n            const entityList = document.getElementById('entity-list');\n            const entityItems = entityList.querySelectorAll('.entity-item');Â·\n            searchInput.addEventListener('input', function() {\n              const searchTerm = this.value.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              entityItems.forEach(item => {\n                const id = item.getAttribute('data-id').toLowerCase();\n                const type = item.getAttribute('data-type').toLowerCase();\n                const text = item.textContent.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n                if (id.includes(searchTerm) || type.includes(searchTerm) || text.includes(searchTerm)) {\n                  item.style.display = '';\n                } else {\n                  item.style.display = 'none';\n                }\n              });\n            });Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          </script>\n        </div>\n      </div>\n    </body>\n    </html>\"\n\n      143 |     \n      144 |     // Check dark theme specific CSS\n    > 145 |     expect(darkThemeFiles['index.html']).toContain('--text-color: #e8eaed');\n          |                                          ^\n      146 |     expect(darkThemeFiles['index.html']).toContain('--bg-color: #202124');\n      147 |     expect(darkThemeFiles['index.html']).toContain('background: rgba(32, 33, 36, 0.8)');\n      148 |     \n\n      at Object.toContain (tests/integration/html-website-features.test.js:145:42)\n\n  â— HTML Website Features â€º should support interactive relationship navigation\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"window.selectEntityById = (id) => {\"\n    Received string:    \"<!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset=\\\"UTF-8\\\">\n      <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n      <title>HTML Features Test</title>Â·Â·Â·\n      <style>\n        :root {\n          --background: #ffffff;\n          --text: #000000;\n          --link: #0066cc;\n          --accent: #666666;\n          --border: #dddddd;\n        }\n        body {\n          font-family: system-ui, -apple-system, sans-serif;\n          margin: 0;\n          padding: 0;\n          background: var(--background);\n          color: var(--text);\n        }\n        .container {\n          display: grid;\n          grid-template-columns: 300px 1fr;\n          height: 100vh;\n        }\n        .sidebar {\n          padding: 20px;\n          border-right: 1px solid var(--border);\n          overflow-y: auto;\n        }\n        .main {\n          padding: 20px;\n          overflow-y: auto;\n        }\n        h1, h2, h3, h4 {\n          color: var(--text);\n          margin-top: 0;\n        }\n        a {\n          color: var(--link);\n          text-decoration: none;\n        }\n        a:hover {\n          text-decoration: underline;\n        }\n        .entity-list {\n          list-style: none;\n          padding: 0;\n        }\n        .entity-item {\n          padding: 8px;\n          margin: 4px 0;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n        }\n        .entity-type {\n          color: var(--accent);\n          font-size: 0.9em;\n        }\n        #graph {\n          width: 100%;\n          height: 600px;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n        }\n        .search-box {\n          margin-bottom: 20px;\n        }\n        #search-input {\n          width: 100%;\n          padding: 8px;\n          border: 1px solid var(--border);\n          border-radius: 4px;\n          background: var(--background);\n          color: var(--text);\n        }\n      </style>\n      <script src=\\\"https://d3js.org/d3.v7.min.js\\\"></script>\n    </head>\n    <body>\n      <div class=\\\"container\\\">\n        <div class=\\\"sidebar\\\">\n          <h2>HTML Features Test</h2>\n          <p>Testing HTML website features</p>Â·Â·Â·Â·Â·Â·Â·\n          <div class=\\\"search-box\\\">\n            <input type=\\\"text\\\" id=\\\"search-input\\\" placeholder=\\\"Search entities...\\\" />\n          </div>Â·Â·Â·Â·Â·Â·Â·\n          <h3>Entities</h3>\n          <ul class=\\\"entity-list\\\" id=\\\"entity-list\\\">Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity1\\\" data-type=\\\"person\\\">\n                <a href=\\\"entity1.html\\\">\n                  John Doe\n                </a>\n                <div class=\\\"entity-type\\\">person</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity2\\\" data-type=\\\"project\\\">\n                <a href=\\\"entity2.html\\\">\n                  Project Alpha\n                </a>\n                <div class=\\\"entity-type\\\">project</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              <li class=\\\"entity-item\\\" data-id=\\\"entity3\\\" data-type=\\\"resource\\\">\n                <a href=\\\"entity3.html\\\">\n                  entity3\n                </a>\n                <div class=\\\"entity-type\\\">resource</div>\n              </li>Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          </ul>\n        </div>\n        <div class=\\\"main\\\">\n          <div id=\\\"graph\\\"></div>\n          <script>\n            // Graph visualization code\n            const data = {\n              nodes: [\n                {\n                    \\\"id\\\": \\\"entity1\\\",\n                    \\\"name\\\": \\\"John Doe\\\",\n                    \\\"type\\\": \\\"person\\\",\n                    \\\"attributes\\\": {\\\"name\\\":\\\"John Doe\\\",\\\"age\\\":30,\\\"email\\\":\\\"john@example.com\\\"}\n                  },\n                {\n                    \\\"id\\\": \\\"entity2\\\",\n                    \\\"name\\\": \\\"Project Alpha\\\",\n                    \\\"type\\\": \\\"project\\\",\n                    \\\"attributes\\\": {\\\"title\\\":\\\"Project Alpha\\\",\\\"status\\\":\\\"Active\\\",\\\"priority\\\":\\\"High\\\"}\n                  },\n                {\n                    \\\"id\\\": \\\"entity3\\\",\n                    \\\"name\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"resource\\\",\n                    \\\"attributes\\\": {\\\"type\\\":\\\"Document\\\",\\\"url\\\":\\\"https://example.com/doc\\\"}\n                  }\n              ],\n              links: [\n                {\n                    \\\"source\\\": \\\"entity1\\\",\n                    \\\"target\\\": \\\"entity2\\\",\n                    \\\"type\\\": \\\"manages\\\"\n                  },\n                {\n                    \\\"source\\\": \\\"entity1\\\",\n                    \\\"target\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"created\\\"\n                  },\n                {\n                    \\\"source\\\": \\\"entity2\\\",\n                    \\\"target\\\": \\\"entity3\\\",\n                    \\\"type\\\": \\\"contains\\\"\n                  }\n              ]\n            };Â·\n            const width = document.getElementById('graph').clientWidth;\n            const height = 600;Â·\n            const simulation = d3.forceSimulation(data.nodes)\n              .force('link', d3.forceLink(data.links).id(d => d.id))\n              .force('charge', d3.forceManyBody().strength(-100))\n              .force('center', d3.forceCenter(width / 2, height / 2));Â·\n            const svg = d3.select('#graph')\n              .append('svg')\n              .attr('width', width)\n              .attr('height', height);Â·\n            const link = svg.append('g')\n              .selectAll('line')\n              .data(data.links)\n              .join('line')\n              .attr('stroke', 'var(--border)')\n              .attr('stroke-width', 1);Â·\n            const node = svg.append('g')\n              .selectAll('circle')\n              .data(data.nodes)\n              .join('circle')\n              .attr('r', 5)\n              .attr('fill', 'var(--link)')\n              .call(drag(simulation));Â·\n            node.append('title')\n              .text(d => d.attributes.name || d.attributes.title || d.id);Â·\n            simulation.on('tick', () => {\n              link\n                .attr('x1', d => d.source.x)\n                .attr('y1', d => d.source.y)\n                .attr('x2', d => d.target.x)\n                .attr('y2', d => d.target.y);Â·\n              node\n                .attr('cx', d => d.x)\n                .attr('cy', d => d.y);\n            });Â·\n            // Entity selection functionality\n            window.selectEntityById = function(id) {\n              // Find the selected node\n              const selectedNode = data.nodes.find(function(n) { return n.id === id; });\n              if (!selectedNode) return;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Reset all nodes\n              node.attr('r', 5).attr('stroke', null);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Highlight the selected node\n              const selectedNodeElement = node.filter(function(d) { return d.id === id; })\n                .attr('r', 8)\n                .attr('stroke', 'var(--link)')\n                .attr('stroke-width', 2);Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              // Center and zoom on the selected node\n              const scale = 2;\n              const x = width / 2 - scale * selectedNode.x;\n              const y = height / 2 - scale * selectedNode.y;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              svg.transition().duration(500)\n                .attr('transform', 'translate(' + x + ',' + y + ') scale(' + scale + ')');\n            };Â·\n            function drag(simulation) {\n              function dragstarted(event) {\n                if (!event.active) simulation.alphaTarget(0.3).restart();\n                event.subject.fx = event.subject.x;\n                event.subject.fy = event.subject.y;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              function dragged(event) {\n                event.subject.fx = event.x;\n                event.subject.fy = event.y;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              function dragended(event) {\n                if (!event.active) simulation.alphaTarget(0);\n                event.subject.fx = null;\n                event.subject.fy = null;\n              }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              return d3.drag()\n                .on('start', dragstarted)\n                .on('drag', dragged)\n                .on('end', dragended);\n            }Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n            // Search functionality\n            const searchInput = document.getElementById('search-input');\n            const entityList = document.getElementById('entity-list');\n            const entityItems = entityList.querySelectorAll('.entity-item');Â·\n            searchInput.addEventListener('input', function() {\n              const searchTerm = this.value.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n              entityItems.forEach(item => {\n                const id = item.getAttribute('data-id').toLowerCase();\n                const type = item.getAttribute('data-type').toLowerCase();\n                const text = item.textContent.toLowerCase();Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·\n                if (id.includes(searchTerm) || type.includes(searchTerm) || text.includes(searchTerm)) {\n                  item.style.display = '';\n                } else {\n                  item.style.display = 'none';\n                }\n              });\n            });Â·Â·Â·Â·Â·Â·Â·Â·Â·\n          </script>\n        </div>\n      </div>\n    </body>\n    </html>\"\n\n      161 |   test('should support interactive relationship navigation', () => {\n      162 |     // Check for interactive relationship links\n    > 163 |     expect(htmlFiles['index.html']).toContain('window.selectEntityById = (id) => {');\n          |                                     ^\n      164 |     expect(htmlFiles['index.html']).toContain('href=\"javascript:void(0)\" onclick=\"selectEntityById');\n      165 |     \n      166 |     // Check that node is highlighted and centered on selection\n\n      at Object.toContain (tests/integration/html-website-features.test.js:163:37)\n\nFAIL tests/integration/export-formats.test.js\n  Export Formats Integration\n    âœ“ HTML Website export format (9 ms)\n    JSON Export\n      âœ“ should export a complete and valid JSON representation (1 ms)\n      âœ• should export JSON with vectors if requested (3 ms)\n    GraphML Export\n      âœ“ should export a valid GraphML representation (2 ms)\n      âœ“ should export GraphML with attributes if requested\n    CSV Export\n      âœ“ should export valid CSV files for entities and relationships (1 ms)\n    Obsidian Export\n      âœ“ should export a complete Obsidian knowledge base (1 ms)\n      âœ“ should include backlinks if requested\n    HTML Website Export\n      âœ“ should export a complete HTML website (1 ms)\n    Full Blob Export\n      âœ“ should export and import a full data blob (1 ms)\n      âœ• should export a compressed full blob (2 ms)\n    KIF Format Export\n      âœ“ should export to KIF format with basic content (1 ms)\n      âœ• should include meta-knowledge, functions, and rules when requested\n      âœ• should export complex entities with vectors and temporal data in KIF format\n\n  â— Export Formats Integration â€º JSON Export â€º should export JSON with vectors if requested\n\n    expect(received).toHaveProperty(path)\n\n    Expected path: \"vector\"\n    Received path: []\n\n    Received value: {\"attributes\": {\"height\": \"15-50 feet\", \"lifespan\": \"150-200 years\", \"name\": \"Saguaro Cactus\", \"scientificName\": \"Carnegiea gigantea\", \"type\": \"plant\"}, \"id\": \"saguaro\", \"metadata\": {\"created\": \"2025-03-05T00:58:29.963Z\", \"modified\": \"2025-03-05T00:58:29.963Z\"}, \"type\": \"organism\"}\n\n      151 |       // Verify vectors included\n      152 |       const saguaro = json.entities.find(e => e.id === 'saguaro');\n    > 153 |       expect(saguaro).toHaveProperty('vector');\n          |                       ^\n      154 |       expect(Array.isArray(saguaro.vector)).toBe(true);\n      155 |       expect(saguaro.vector.length).toBe(3);\n      156 |       expect(saguaro.vector[0]).toBeCloseTo(0.1, 5);\n\n      at Object.toHaveProperty (tests/integration/export-formats.test.js:153:23)\n\n  â— Export Formats Integration â€º Full Blob Export â€º should export a compressed full blob\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"string\"\n    Received: \"object\"\n\n      356 |       \n      357 |       // Verify blob is a string\n    > 358 |       expect(typeof compressedBlob).toBe('string');\n          |                                     ^\n      359 |       \n      360 |       // Save for inspection\n      361 |       const outputDir = getSystemOutputPath(integrationSystem, 'full-blob-compressed');\n\n      at Object.toBe (tests/integration/export-formats.test.js:358:37)\n\n  â— Export Formats Integration â€º KIF Format Export â€º should include meta-knowledge, functions, and rules when requested\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"(= (creationDate UltraLinkExport)\"\n    Received string:    \";; UltraLink Knowledge Interchange Format (KIF) Export\n    ;; Generated: 2025-03-05T00:58:29.982Z\n    ;; Entities and their attributes\n    (instance saguaro Organism)\n    (name saguaro \\\"Saguaro Cactus\\\")\n    (scientificName saguaro \\\"Carnegiea gigantea\\\")\n    (type saguaro \\\"plant\\\")\n    (height saguaro \\\"15-50 feet\\\")\n    (lifespan saguaro \\\"150-200 years\\\")Â·\n    (instance kangaroo-rat Organism)\n    (name kangaroo-rat \\\"Kangaroo Rat\\\")\n    (scientificName kangaroo-rat \\\"Dipodomys\\\")\n    (type kangaroo-rat \\\"mammal\\\")\n    (weight kangaroo-rat \\\"100-150g\\\")\n    (nocturnal kangaroo-rat \\\"true\\\")Â·\n    (instance aridity Environmental_factor)\n    (name aridity \\\"Aridity\\\")\n    (description aridity \\\"Extremely dry conditions with minimal rainfall\\\")\n    (annualRainfall aridity \\\"3-15 inches\\\")Â·\n    ;; Relationships\n    (adapts_to saguaro aridity)\n    (adapts_to kangaroo-rat aridity)Â·\n    ;; Meta-knowledge\n    (= (entityCount UltraLinkExport) 3)\n    (= (relationshipCount UltraLinkExport) 2)\n    (= (exportDate UltraLinkExport) \\\"2025-03-05T00:58:29.982Z\\\")\n    (= (exportVersion UltraLinkExport) \\\"1.0\\\")Â·\n    ;; Functions\n    (deffunction relationshipCount (?kb)\n      :documentation \\\"Returns the total number of relationships in a knowledge base\\\"\n      :return-type Integer)Â·\n    (deffunction entityCount (?kb)\n      :documentation \\\"Returns the total number of entities in a knowledge base\\\"\n      :return-type Integer)Â·\n    ;; Rules\n    (defrule temporal-ordering\n      :documentation \\\"Rule for temporal ordering of events\\\"\n      (and (instance ?e1 Event)\n           (instance ?e2 Event)\n           (date ?e1 ?d1)\n           (date ?e2 ?d2)\n           (evaluate ?before (string< ?d1 ?d2)))\n      (before ?e1 ?e2))\n    \"\n\n      453 |       // Verify meta-knowledge\n      454 |       expect(kifComplete).toContain(';; Meta-knowledge');\n    > 455 |       expect(kifComplete).toContain('(= (creationDate UltraLinkExport)');\n          |                           ^\n      456 |       expect(kifComplete).toContain('(= (entityCount UltraLinkExport)');\n      457 |       expect(kifComplete).toContain('(= (relationshipCount UltraLinkExport)');\n      458 |       \n\n      at Object.toContain (tests/integration/export-formats.test.js:455:27)\n\n  â— Export Formats Integration â€º KIF Format Export â€º should export complex entities with vectors and temporal data in KIF format\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"(= (strength-mentions document concept1) 0.85)\"\n    Received string:    \";; UltraLink Knowledge Interchange Format (KIF) Export\n    ;; Generated: 2025-03-05T00:58:29.983Z\n    ;; Entities and their attributes\n    (instance concept1 Concept)\n    (name concept1 \\\"Democracy\\\")\n    (definition concept1 \\\"Government by the people\\\")Â·\n    (instance concept2 Concept)\n    (name concept2 \\\"Freedom\\\")\n    (definition concept2 \\\"The power of self-determination\\\")Â·\n    (instance document Historical_document)\n    (name document \\\"Declaration of Independence\\\")\n    (date document \\\"1776-07-04\\\")\n    (author document \\\"Thomas Jefferson\\\")Â·\n    ;; Relationships\n    (mentions document concept1)\n    (mentions document concept2)\n    (related_to concept1 concept2)Â·\n    ;; Meta-knowledge\n    (= (entityCount UltraLinkExport) 3)\n    (= (relationshipCount UltraLinkExport) 3)\n    (= (exportDate UltraLinkExport) \\\"2025-03-05T00:58:29.983Z\\\")\n    (= (exportVersion UltraLinkExport) \\\"1.0\\\")Â·\n    ;; Functions\n    (deffunction relationshipCount (?kb)\n      :documentation \\\"Returns the total number of relationships in a knowledge base\\\"\n      :return-type Integer)Â·\n    (deffunction entityCount (?kb)\n      :documentation \\\"Returns the total number of entities in a knowledge base\\\"\n      :return-type Integer)Â·\n    ;; Rules\n    (defrule temporal-ordering\n      :documentation \\\"Rule for temporal ordering of events\\\"\n      (and (instance ?e1 Event)\n           (instance ?e2 Event)\n           (date ?e1 ?d1)\n           (date ?e2 ?d2)\n           (evaluate ?before (string< ?d1 ?d2)))\n      (before ?e1 ?e2))\n    \"\n\n      531 |       \n      532 |       // Verify relationship attributes\n    > 533 |       expect(kif).toContain('(= (strength-mentions document concept1) 0.85)');\n          |                   ^\n      534 |       expect(kif).toContain('(= (first_occurrence-mentions document concept1) \"paragraph 1\")');\n      535 |       expect(kif).toContain('(= (similarity-related_to concept1 concept2) 0.65)');\n      536 |     });\n\n      at Object.toContain (tests/integration/export-formats.test.js:533:19)\n\nTest Suites: 3 failed, 2 passed, 5 total\nTests:       16 failed, 29 passed, 45 total\nSnapshots:   0 total\nTime:        0.327 s\nRan all test suites matching /tests\\/integration/i.\n",
      "exitCode": 1
    },
    {
      "name": "System Export Tests",
      "command": "npx jest tests/system",
      "required": true,
      "status": "passed",
      "output": "\nğŸ” \u001b[1m\u001b[36mUltraLink Test Suite Starting\u001b[0m\n\nâœ… \u001b[32mtests/system/placeholder.test.js\u001b[0m - 1/1 tests passed\n  console.log\n    Testing format: png, Files found: [ 'researchteam.png' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: svg, Files found: [ 'researchteam.svg' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: d3, Files found: [ 'researchteam-d3.html' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: cytoscape, Files found: [ 'researchteam-cytoscape.html' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: png, Files found: [ 'desertecosystem.png' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: svg, Files found: [ 'desertecosystem.svg' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: d3, Files found: [ 'desertecosystem-d3.html' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: cytoscape, Files found: [ 'desertecosystem-cytoscape.html' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: png, Files found: [ 'activeinferencelab.png' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: svg, Files found: [ 'activeinferencelab.svg' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: d3, Files found: [ 'activeinferencelab-d3.html' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: cytoscape, Files found: [ 'activeinferencelab-cytoscape.html' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: png, Files found: [ 'usahistory.png' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: svg, Files found: [ 'usahistory.svg' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: d3, Files found: [ 'usahistory-d3.html' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\n  console.log\n    Testing format: cytoscape, Files found: [ 'usahistory-cytoscape.html' ]\n\n      at log (tests/system/rendering.test.js:221:27)\n          at Array.forEach (<anonymous>)\n\nâœ… \u001b[32mtests/system/rendering.test.js\u001b[0m - 56/56 tests passed\n\nğŸ“Š \u001b[1m\u001b[36mTest Summary\u001b[0m\n   Total Test Suites: 2\n   Total Tests: 57\n   Passed: \u001b[32m57\u001b[0m\n   Failed: \u001b[31m0\u001b[0m\n   Time: 0.48s\n\nâœ… \u001b[32mAll tests passed successfully!\u001b[0m\n\n",
      "error": null,
      "exitCode": 0
    },
    {
      "name": "End-to-End Tests",
      "command": "npx jest tests/e2e",
      "required": true,
      "status": "passed",
      "output": "\nğŸ” \u001b[1m\u001b[36mUltraLink Test Suite Starting\u001b[0m\n\nâœ… \u001b[32mtests/e2e/knowledge-base.test.js\u001b[0m - 1/1 tests passed\n\nğŸ“Š \u001b[1m\u001b[36mTest Summary\u001b[0m\n   Total Test Suites: 1\n   Total Tests: 1\n   Passed: \u001b[32m1\u001b[0m\n   Failed: \u001b[31m0\u001b[0m\n   Time: 0.09s\n\nâœ… \u001b[32mAll tests passed successfully!\u001b[0m\n\n",
      "error": null,
      "exitCode": 0
    }
  ],
  "summary": {
    "total": 5,
    "passed": 3,
    "failed": 2,
    "skipped": 0
  }
}